{"summary": "We need to produce JSON with summary, business_intent, keywords list.\n\nWe must not list function names verbatim. So we should describe responsibilities.\n\nFile: sensor/history_stats.py. Provides a Home Assistant sensor platform that computes instant statistics (count, time, ratio, etc.) from entity's state history over a defined period. Includes helper utilities for formatting durations and handling template errors. Handles configuration schema, sets up platform, creates sensor entity, updates periodically based on state changes and time intervals.\n\nBusiness intent: allow users to monitor aggregated statistics (e.g., total time on, count of state changes, ratio of time in a state) for any entity over a configurable time window, useful for energy monitoring, usage tracking, etc.\n\nKeywords: Home Assistant, sensor, history statistics, period, duration, count, ratio, state tracking, template handling, entity monitoring.\n\nMake sure not to mention function names.\n\nLet's craft JSON.\n\nNeed to ensure proper escaping.\n\nReturn:\n\n{\n \"summary\": \"...\",\n \"business_intent\": \"...\",\n \"keywords\": [...]\n}\n\nLet's write.\n\nSummary: \"Implements a sensor platform that calculates real‑time statistical metrics from the historical state changes of a specified entity over a configurable time interval. It defines configuration validation, sets up the platform, creates a sensor entity, and periodically refreshes its state using Home Assistant’s history component. Helper utilities format durations and ratios and safely handle template errors.\"\n\nBusiness intent: \"Enable Home Assistant users to obtain aggregated insights such as total time spent in a state, number of state changes, or proportion of time in a particular state for any entity, supporting monitoring, reporting, and automation decisions.\"\n\nKeywords list: [\"Home Assistant\", \"sensor platform\", \"historical statistics\", \"state duration\", \"state count\", \"ratio\", \"periodic update\", \"entity monitoring\", \"template handling\", \"configuration schema\"]\n\nReturn JSON.\n\nCheck no extra spaces? fine.\n\nLet's output.\n{\n  \"summary\": \"Implements a sensor platform that calculates real‑time statistical metrics from the historical state changes of a specified entity over a configurable time interval. It validates configuration, sets up the platform, creates a sensor entity, and periodically refreshes its state using Home Assistant’s history component. Helper utilities format durations and ratios and safely handle template errors.\",\n  \"business_intent\": \"Enable Home Assistant users to obtain aggregated insights such as total time spent in a state, number of state changes, or proportion of time in a particular state for any entity, supporting monitoring, reporting, and automation decisions.\",", "business_intent": "We need to produce JSON with summary, business_intent, keywords list.\n\nWe must not list function names verbatim. So we should describe responsibilities.\n\nFile: sensor/history_stats.py. Provides a Home Assistant sensor platform that computes instant statistics (count, time, ratio, etc.) from entity's state history over a defined period. Includes helper utilities for formatting durations and handling template errors. Handles configuration schema, sets up platform, creates sensor entity, updates periodically based on state changes and time intervals.\n\nBusiness intent: allow users to monitor aggregated statistics (e.g., total time on, count of state changes, ratio of time in a state) for any entity over a configurable time window, useful for energy monitoring, usage tracking, etc.\n\nKeywords: Home Assistant, sensor, history statistics, period, duration, count, ratio, state tracking, template handling, entity monitoring.\n\nMake sure not to mention function names.\n\nLet's craft JSON.\n\nNeed to ensure proper escaping.\n\nReturn:\n\n{\n \"summary\": \"...\",\n \"business_intent\": \"...\",\n \"keywords\": [...]\n}\n\nLet's write.\n\nSummary: \"Implements a sensor platform that calculates real‑time statistical metrics from the historical state changes of a specified entity over a configurable time interval. It defines configuration validation, sets up the platform, creates a sensor entity, and periodically refreshes its state using Home Assistant’s history component. Helper utilities format durations and ratios and safely handle template errors.\"\n\nBusiness intent: \"Enable Home Assistant users to obtain aggregated insights such as total time spent in a state, number of state changes, or proportion of time in a particular state for any entity, supporting monitoring, reporting, and automation decisions.\"\n\nKeywords list: [\"Home Assistant\", \"sensor platform\", \"historical statistics\", \"state duration\", \"state count\", \"ratio\", \"periodic update\", \"entity monitoring\", \"template handling\", \"configuration schema\"]\n\nReturn JSON.\n\nCheck no extra spaces? fine.\n\nLet's output.\n{\n  \"summary\": \"Implements a sensor platform that calculates real‑time statistical metrics from the historical state changes of a specified entity over a configurable time interval. It validates configuration, sets up the platform, creates a sensor entity, and periodically refreshes its state using Home Assistant’s history component. Helper utilities format durations and ratios and safely handle template errors.\",\n  \"business_intent\": \"Enable Home Assistant users to obtain aggregated insights such as total time spent in a state, number of state changes, or proportion of time in a particular state for any entity, supporting monitoring, reporting, and automation decisions.\",", "keywords": [], "summary_hash": "197bd80974f7", "cached_at": "2026-02-09T06:02:58+00:00"}