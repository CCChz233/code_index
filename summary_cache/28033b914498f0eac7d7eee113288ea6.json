{"summary": "The provided code defines a zipimporter module that implements ****.\nWe need to summarize functionality of the code snippet. The code is part of Python's zipimport module. It defines constants, imports, and a function _get_data that reads a file entry from a zip archive, handling compression via zlib. The business logic: given archive path and toc_entry (tuple with metadata), it opens the archive, seeks to file offset, reads local file header, validates, calculates data offset, reads raw data, decompresses if needed, returns bytes. It raises ZipImportError for errors. Also defines caches, search order, cp437 table, etc. So summary: module provides zipimporter class for importing modules from zip archives, handling .py/.pyc files, caching directory listings, supporting compressed data via zlib, etc. Input: archive path string, toc_entry tuple. Output: bytes of file content (decompressed). Also defines constants for zip format. Provide Chinese description. Let's craft final answer.assistantfinal\u5b9e\u73b0\u5bf9 ZIP \u5305\u5185 Python \u6a21\u5757\u7684\u8bfb\u53d6\u4e0e\u89e3\u538b\uff0c\u4f9b `zipimporter` \u7c7b\u5728\u5bfc\u5165\u673a\u5236\u4e2d\u4f7f\u7528\u3002  \n\n**\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91**  \n- **\u5e38\u91cf\u4e0e\u7f13\u5b58**\uff1a  \n  - `path_sep`\u3001`alt_path_sep`\uff1a\u5e73\u53f0\u8def\u5f84\u5206\u9694\u7b26\u3002  \n  - `_zip_directory_cache`\uff1a\u7f13\u5b58\u5df2\u89e3\u6790\u7684 ZIP \u76ee\u5f55\u7ed3\u6784\uff0c\u907f\u514d\u91cd\u590d\u8bfb\u53d6\u3002  \n  - `END_CENTRAL_DIR_SIZE`\u3001`STRING_END_ARCHIVE`\u3001`MAX_COMMENT_LEN`\uff1aZIP \u6587\u4ef6\u7ed3\u6784\u7684\u5e95\u5c42\u6807\u8bc6\u3002  \n  - `_zip_searchorder`\uff1a\u5728 ZIP \u4e2d\u67e5\u627e\u6a21\u5757\u65f6\u7684\u6587\u4ef6\u540d\u540e\u7f00\u987a\u5e8f\uff08`__init__.pyc`\u3001`__init__.py`\u3001`.pyc`\u3001`.py`\uff09\u3002  \n  - `cp437_table`\uff1aZIP \u4e2d\u9ed8\u8ba4\u7684 CP437 \u7f16\u7801\u8868\uff0c\u7528\u4e8e\u6587\u4ef6\u540d\u89e3\u7801\u3002  \n\n- **_get_data(archive, toc_entry)**\uff1a  \n  - **\u8f93\u5165**  \n    - `archive`\uff1aZIP \u5305\u7684\u6587\u4ef6\u8def\u5f84\uff08\u5b57\u7b26\u4e32\uff09\u3002  \n    - `toc_entry`\uff1a\u76ee\u5f55\u6761\u76ee\u5143\u7ec4\uff0c\u5305\u542b `(datapath, compress, data_size, file_size, file_offset, time, date, crc)`\u3002  \n  - **\u5904\u7406\u6b65\u9aa4**  \n    1. \u68c0\u67e5 `data_size` \u662f\u5426\u4e3a\u8d1f\uff0c\u82e5\u662f\u629b `ZipImportError`\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:55:22.505248"}