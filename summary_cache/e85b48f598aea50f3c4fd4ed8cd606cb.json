{"summary": "The code defines a function ``open`............ ... ... ... ... ... ... \n\nThe ... ... ... ... \n\n...\n\n...\n\n...\nWe need to summarize the functionality of the code snippet. The snippet includes imports, a TypeVar, logger, and a function openai_schema that takes a class subclass of BaseModel and returns an OpenAISchema. It uses wraps and create_model to create a new model that inherits from the original class and OpenAISchema. It casts to OpenAISchema. There's also mention of other imports like json, logging, wraps, Annotated, Any, Optional, TypeVar, cast, docstring_parser.parse, ChatCompletion, BaseModel, ConfigDict, Field, TypeAdapter, create_model, IncompleteOutputException, Mode, classproperty, extract_json_from_codeblock, map_to_gemini_function_schema. The code snippet is incomplete; only part of the file is shown. The function openai_schema is the main piece.\n\nWe need to summarize business logic, inputs, outputs. So: The function openai_schema takes a Pydantic BaseModel subclass and returns a new class that also inherits from OpenAISchema (presumably defined elsewhere). It validates that the input is a subclass of BaseModel, then uses Pydantic's create_model to dynamically create a subclass combining the original class and OpenAISchema, preserving the name. It uses wraps to preserve metadata. It returns the new class cast to OpenAISchema.\n\nThus the summary: This code provides a utility to convert a Pydantic model into an OpenAI schema representation by dynamically creating a subclass that mixes the original model with OpenAISchema, ensuring type compatibility. Input: a class type that inherits from BaseModel. Output: a class type that inherits from both the original and OpenAISchema.\n\nAlso mention logger usage, but not used in this snippet.\n\nThus answer in Chinese. No preamble. Just summary.assistantfinal\u5c06 Pydantic `BaseModel` \u5b50\u7c7b\u8f6c\u6362\u4e3a OpenAI \u51fd\u6570\u8c03\u7528\u6240\u9700\u7684 schema\u3002  \n**\u8f93\u5165**\uff1a\u4efb\u610f\u7ee7\u627f\u81ea `pydantic.BaseModel` \u7684\u7c7b\u5bf9\u8c61 `cls`\u3002  \n**\u5904\u7406**\uff1a  \n1. \u68c0\u67e5 `cls` \u662f\u5426\u4e3a `BaseModel` \u5b50\u7c7b\uff0c\u82e5\u4e0d\u662f\u629b\u51fa `TypeError`\u3002  \n2. \u4f7f\u7528 `functools.wraps` \u4fdd\u7559\u539f\u7c7b\u7684\u5143\u6570\u636e\u3002  \n3. \u8c03\u7528 `pydantic.create_model` \u52a8\u6001\u521b\u5efa\u4e00\u4e2a\u65b0\u6a21\u578b\uff0c", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:46:19.450518"}