{"summary": "- The `reask_gemini_tools` function handles validation errors when interacting with Gemini's generative language API.\n- It takes a dictionary `kwargs` (the request payload for Gemini), a `response` object containing the original response from the API.\n- It adds a `function` role message (function call) to the ****.\n```\"\n\nWe need to produce a summary of the functionality of the code. The code is a Python module `instructor/reask.py`. It imports various modules, defines type variables, and defines a function `reask_gemini_tools`. The function takes `kwargs: dict[str, Any]`, `response: Any`, and `exception: Exception`. It imports `google.ai.generativelanguage as glm`. It constructs `reask_msgs`, a list of two messages: one with role \"function\" and parts containing a `glm.Part` with a `function_response` that includes the function name from the original response and a response dict with an error message containing the exception. The second message has role \"user\" and parts with a string prompting to recall the function arguments correctly and fix the errors. Then it extends `kwargs[\"contents\"]` with these messages and returns `kwargs`.\n\nThus the function modifies the request payload to include a re-ask message for Gemini to correct validation errors.\n\nThe summary should be in Chinese (with possibly English terms). It should start directly with the summary content, no preamble. Should focus on business logic, inputs, outputs.\n\nThus produce something like:\n\n- \u529f\u80fd: \u5904\u7406 Gemini API \u8c03\u7528\u65f6\u7684\u9a8c\u8bc1\u9519\u8bef\uff0c\u5411\u8bf7\u6c42\u4e2d\u8ffd\u52a0\u91cd\u65b0\u8be2\u95ee\u7684\u6d88\u606f\uff0c\u4f7f\u6a21\u578b\u91cd\u65b0\u751f\u6210\u6b63\u786e\u7684\u51fd\u6570\u53c2\u6570\u3002\n- \u8f93\u5165: `kwargs`\uff08Gemini \u8bf7\u6c42\u7684 payload\uff0c\u5fc5\u987b\u5305\u542b `contents` \u5217\u8868\uff09\uff0c`response`\uff08\u539f\u59cb Gemini \u54cd\u5e94\uff0c\u5305\u542b\u51fd\u6570\u8c03\u7528\u4fe1\u606f\uff09\uff0c`exception`\uff08\u6355\u83b7\u7684\u9a8c\u8bc1\u5f02\u5e38\uff09\u3002\n- \u5904\u7406: \u4ece `response` \u4e2d\u63d0\u53d6\u51fd\u6570\u540d\uff0c\u6784\u9020\u4e24\u6761\u6d88\u606f\uff1a\u4e00\u6761 `function` \u89d2\u8272\u7684\u9519\u8bef\u62a5\u544a\uff0c\u5305\u542b\u51fd\u6570\u540d\u548c\u9519\u8bef\u4fe1\u606f\uff1b\u53e6\u4e00\u6761 `user` \u89d2\u8272\u7684\u63d0\u793a\uff0c\u8981\u6c42\u6a21\u578b\u56de\u5fc6\u5e76\u4fee\u6b63\u51fd\u6570\u53c2\u6570\u3002\u5c06\u8fd9\u4e24\u6761\u6d88\u606f\u8ffd\u52a0\u5230 `kwargs[\"contents\"]`\u3002\n- \u8f93\u51fa: \u8fd4\u56de\u4fee\u6539\u540e\u7684 `kwargs`\uff0c\u7528\u4e8e\u518d\u6b21\u53d1\u9001\u7ed9 Gemini\u3002\n\nMake sure to start directly with the summary content. Use Chinese. Possibly include English terms like \"function\", \"user\". Provide concise bullet points.\n\nLet's produce that", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:41:03.529284"}