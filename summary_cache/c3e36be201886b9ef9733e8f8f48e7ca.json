{"summary": "- The code defines a `read_chunk` asynchronous function within a `BodyPartReader` class, which reads a chunk of data from the body part.\n- It handles both ``````.\nWe need to produce a summary of functionality, focusing on business logic, inputs, outputs, in Chinese (or Chinese/English). Must start directly with summary content, no preamble. Provide concise description.\n\nWe have code snippet from aiohttp multipart handling. The function read_chunk reads a chunk of body part content, handling length-specified or stream reading, handling base64 transfer encoding, ensuring proper chunk size multiple of 4, handling EOF, and verifying CRLF after final chunk.\n\nInputs: self (BodyPartReader instance), size (int default 8192). It uses internal state: _at_eof, _length, _read_bytes, _prev_chunk, _content (stream). Output: bytes chunk.\n\nBusiness logic: read chunk from length or stream, adjust for base64 encoding, update read counters, set EOF flag, read trailing CRLF, assert correct format.\n\nLet's craft summary in Chinese.\n\nAlso mention that function is async, returns bytes.\n\nLet's produce final answer.assistantfinal\u8bfb\u53d6 multipart \u4f53\u4e2d\u4e00\u6bb5\u6570\u636e\u7684\u5f02\u6b65\u51fd\u6570 `read_chunk(size=8192)`\uff0c  \n- **\u8f93\u5165**\uff1a`self`\uff08`BodyPartReader` \u5b9e\u4f8b\uff0c\u5185\u90e8\u4fdd\u5b58\u4e86 `_content` \u6d41\u3001\u5df2\u8bfb\u53d6\u5b57\u8282\u6570 `_read_bytes`\u3001\u603b\u957f\u5ea6 `_length`\u3001\u662f\u5426\u5df2\u5230\u6587\u4ef6\u5c3e `_at_eof`\u3001\u4e0a\u4e00\u6b21\u6b8b\u4f59\u6570\u636e `_prev_chunk` \u7b49\u72b6\u6001\uff09\uff0c\u4ee5\u53ca\u53ef\u9009\u7684 `size`\uff08\u671f\u671b\u8bfb\u53d6\u7684\u5757\u5927\u5c0f\uff09\u3002  \n- **\u4e1a\u52a1\u903b\u8f91**\uff1a  \n  1. \u82e5\u5df2\u5230 EOF\uff0c\u76f4\u63a5\u8fd4\u56de\u7a7a `b\"\"`\u3002  \n  2. \u6839\u636e\u662f\u5426\u5df2\u77e5\u5185\u5bb9\u957f\u5ea6\uff0c\u5206\u522b\u8c03\u7528 `_read_chunk_from_length` \u6216 `_read_chunk_from_stream` \u8bfb\u53d6\u6307\u5b9a\u5927\u5c0f\u7684\u539f\u59cb\u5b57\u8282\u5757\u3002  \n  3. \u68c0\u67e5 `Content-Transfer-Encoding` \u5934\u90e8\uff1b\u82e5\u4e3a `base64`\uff0c\u5219\u786e\u4fdd\u8bfb\u53d6\u7684\u5b57\u8282\u6570\u5728\u53bb\u9664\u6362\u884c\u7b26\u540e\u80fd\u591f\u88ab 4 \u6574\u9664\uff08base64 \u7f16\u7801\u8981\u6c42\uff09\uff0c\u4e0d\u8db3\u65f6\u4ece\u5269\u4f59\u7f13\u51b2\u6216\u6d41\u4e2d\u8865\u8db3\uff0c\u76f4\u81f3\u6ee1\u8db3\u5bf9\u9f50\u6216\u6d41\u7ed3\u675f\u3002  \n  4. \u66f4\u65b0\u5df2\u8bfb\u53d6\u5b57\u8282\u8ba1\u6570 `_read_bytes`\uff0c\u82e5\u5df2\u8bfb\u5b8c\u5168\u90e8\u957f\u5ea6\u5219\u6807", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:48:49.640419"}