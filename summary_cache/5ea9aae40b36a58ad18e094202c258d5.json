{"summary": "- The code defines a multimodal image handling module.\n- It imports necessary libraries and defines type variables and constants.\n- It defines a Pydantic BaseModel class with fields for image source, media type, and base64 data.\n- It provides a static method `url_to_base64` that fetches an image from a URL and converts it to base64, using a cache.\nWe need to produce a summary directly, no intro phrase. Should be Chinese, can mix English. Provide business logic, inputs, outputs. Let's craft. Mention that module handles image sources (URL, file path, base64), validates MIME types, provides caching conversion. Output is base64 string. Also mention that uses Pydantic model for validation. Provide details. Let's answer.assistantfinal- \u8be5\u6a21\u5757\u5b9e\u73b0 **\u591a\u6a21\u6001\u56fe\u7247\u5904\u7406**\uff0c\u4e3b\u8981\u529f\u80fd\u662f\u7edf\u4e00\u7ba1\u7406\u56fe\u7247\u7684\u6765\u6e90\u3001MIME \u7c7b\u578b\u4ee5\u53ca Base64 \u7f16\u7801\u6570\u636e\u3002  \n- **\u8f93\u5165**  \n  - `source`\uff1a\u53ef\u4ee5\u662f\u56fe\u7247\u7684 URL\u3001\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84\uff08`Path`\uff09\u6216\u76f4\u63a5\u7684 Base64 \u5b57\u7b26\u4e32\u3002  \n  - `media_type`\uff1a\u56fe\u7247\u7684 MIME \u7c7b\u578b\uff0c\u5fc5\u987b\u662f `image/jpeg\u3001image/png\u3001image/gif\u3001image/webp` \u4e4b\u4e00\u3002  \n  - `data`\uff08\u53ef\u9009\uff09\uff1a\u82e5\u5df2\u63d0\u4f9b Base64 \u7f16\u7801\u7684\u56fe\u7247\u6570\u636e\uff0c\u53ef\u76f4\u63a5\u586b\u5165\uff1b\u5426\u5219\u5728\u540e\u7eed\u8c03\u7528\u4e2d\u81ea\u52a8\u751f\u6210\u3002  \n- **\u4e1a\u52a1\u903b\u8f91**  \n  1. \u4f7f\u7528 **Pydantic `BaseModel`** \u5bf9\u4e0a\u8ff0\u5b57\u6bb5\u8fdb\u884c\u58f0\u660e\u548c\u6821\u9a8c\uff0c\u786e\u4fdd `source` \u4e0e `media_type` \u5fc5\u586b\uff0c`data` \u4e3a\u53ef\u9009\u4e14\u5728 `repr` \u4e2d\u9690\u85cf\u3002  \n  2. \u63d0\u4f9b **`url_to_base64`** \u9759\u6001\u65b9\u6cd5\uff1a  \n     - \u63a5\u6536\u56fe\u7247 URL\uff08`str`\uff09\u4f5c\u4e3a\u53c2\u6570\u3002  \n     - \u901a\u8fc7 `requests.get` \u4e0b\u8f7d\u56fe\u7247\u5e76\u68c0\u67e5 HTTP \u72b6\u6001\u3002  \n     - \u5c06\u54cd\u5e94\u5185\u5bb9 (`bytes`) \u4f7f\u7528 `base64.b64encode` \u7f16\u7801\u4e3a UTF\u20118 \u5b57\u7b26\u4e32\u5e76\u8fd4\u56de\u3002  \n     - \u65b9\u6cd5\u4f7f\u7528 `@lru_cache` \u88c5\u9970\uff0c\u5b9e\u73b0 **\u7ed3\u679c\u7f13\u5b58**\uff0c\u540c\u4e00 URL \u7684\u591a\u6b21\u8c03\u7528\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7684 Base64\uff0c\u63d0\u5347\u6027\u80fd\u5e76\u964d\u4f4e\u7f51\u7edc\u8bf7\u6c42\u3002  \n- **\u8f93\u51fa**  \n  - `url_to_base64` \u8fd4\u56de **Base64 \u7f16\u7801\u7684\u56fe\u7247\u5b57\u7b26\u4e32**\u3002  \n  - \u5f53\u5b9e\u4f8b\u5316\u6a21\u578b\u65f6\uff0c\u82e5\u672a\u63d0\u4f9b `", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:37:21.042701"}