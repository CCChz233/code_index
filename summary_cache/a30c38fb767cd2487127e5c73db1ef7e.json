{"summary": "- \u8f93\u5165\u4e3a SpectrumType \u5bf9\u8c61\uff0c\u8868\u793a\u8d28\u8c31\u6570\u636e\u3002\n- \u4f9d\u6b21\u8c03\u7528\u516d\u4e2a\u8fc7\u6ee4/\u8f6c\u6362\u51fd\u6570\uff0c\u5bf9\u5149\u8c31\u8fdb\u884c\u4ee5\u4e0b\u5904\u7406\uff1a\n  1. `make_charge_scalar`\uff1a\u5c06\u7535\u8377\u4fe1\u606f\u8f6c\u4e3a\u6807\u91cf\u5f62\u5f0f\uff0c\u7edf\u4e00\u683c\u5f0f\u3002\n  2. `make_ionmode_lowercase`\uff1a\u5c06\u79bb\u5b50\u6a21\u5f0f\u5b57\u7b26\u4e32\u8f6c\u4e3a\u5c0f\u5199\uff0c\u6807\u51c6\u5316\u3002\n  3. `set_ionmode_na_when_missing`\uff1a\u82e5\u79bb\u5b50\u6a21\u5f0f\u7f3a\u5931\u5219\u586b\u5145\u4e3a `\"NA\"`\u3002\n  4. `add_adduct?`\uff1a\u6839\u636e\u5df2\u6709\u4fe1\u606f\u6dfb\u52a0\u6216\u63a8\u65ad\u7684 adduct\uff08\u52a0\u5408\u7269\uff09\u5b57\u6bb5\u3002\n  5. `derive_ionmode`\uff1a\u6839\u636e adduct \u6216\u5176\u4ed6\u5143\u6570\u636e\u63a8\u65ad\u51fa\u79bb\u5b50\u6a21\u5f0f\u5e76\u586b\u5145\u3002\n  (\u6ce8: 2~5 \u6b65\u9aa4\u53ef\u80fd\u76f8\u4e92\u5173\u8054\uff0c\u5f62\u6210\u9012\u5f52/\u5faa\u73af\u7684\u903b\u8f91)\n  6. `correct_c\n\n- \u8f93\u51fa\u8fd4\u56de\u7ecf\u8fc7\u4e0a\u8ff0\u5904\u7406\u540e\u7684 SpectrumType \u5bf9\u8c61\uff0c\u4f9b\u540e\u7eed\u5206\u6790\u6216\u4fdd\u5b58\u3002\n- \u8be5\u51fd\u6570\u76f8\u5f53\u4e8e\u201c\u9ed8\u8ba4\u201d\u9ed8\u8ba4\u8fc7\u6ee4\u5668\u96c6\u5408\uff0c\u7edf\u4e00\u5316\u7edf\u4e00\u5316\u8d28\u8c31\u8c31\u8c31\n\n\n\nThe user wants a summary of the functionality of the given code. Requirements:\n\n1. Start directly with the summary content. No \"This code does...\" or \"Here is...\".\n2. Focus on the business logic, inputs, and outputs.\n3. Use Chinese (e.g., Chinese/English).\n\nWe need to produce a concise summary in Chinese (maybe with some English terms). The code defines default_filters(spectrum) that applies a series of transformations to a SpectrumType object: make_charge_scalar, make_ionmode_lowercase, set_ionmode_na_when_missing, add_adduct, derive_ionmode, correct_charge. It returns the transformed spectrum.\n\nWe need to mention that the input is a SpectrumType (mass spectrometry spectrum), output is the same type after processing. The business logic: standardize charge representation, normalize ion mode string, fill missing ion mode with \"NA\", add adduct information, infer ion mode from adduct, correct charge sign.\n\nWe should not start with \"This code does...\" but directly with the summary. So start with something like:\n\n\"\u8f93\u5165\u4e3a SpectrumType\uff08\u8d28\u8c31\u5149\u8c31\uff09\u5bf9\u8c61\uff0c\u51fd\u6570\u4f9d\u6b21\u6267\u884c\u516d\u4e2a\u9ed8\u8ba4\u8fc7\u6ee4/\u6807\u51c6\u5316\u6b65\u9aa4...\"\n\nMake sure to follow the requirements.\n\nLet's produce final answer.assistantfinal\u8f93\u5165\u4e3a `SpectrumType`\uff08\u8d28\u8c31", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:41:03.544264"}