{"summary": "\u8be5\u6d4b\u8bd5\u6587\u4ef6 `tests/test_multimodal.py` \u4e3b\u8981\u9a8c\u8bc1\u591a\u6a21\u6001\u5904\u7406\u6a21\u5757\u7684\u529f\u80fd\uff0c\u5c24\u5176\u662f\u5bf9 JPEG \u56fe\u50cf\u7684 Base64 \u7f16\u7801\u81ea\u52a8\u68c0\u6d4b\u4e0e\u89e3\u6790\u3002\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5982\u4e0b\uff1a\n\n1. **\u8f93\u5165**  \n   - `base64_jpeg` fixture \u63d0\u4f9b\u4e00\u4e2a\u5b8c\u6574\u7684 Data URL\uff08\u5982 `data:image/jpeg;base64,...`\uff09\uff0c\u5176\u4e2d\u5305\u542b JPEG \u56fe\u50cf\u7684 Base64 \u7f16\u7801\u3002\n\n2. **\u5904\u7406\u6d41\u7a0b**  \n   - `base64_jpeg.split(\",\")[-1]` \u63d0\u53d6\u51fa\u7eaf\u7cb9\u7684 Base64 \u5b57\u7b26\u4e32\uff08\u53bb\u6389 `data:image/jpeg;base64,` \u524d\u7f00\uff09\u3002  \n   - \u8c03\u7528 `Image.autodetect(raw_base_64)`\uff1a  \n     - \u8be5\u5de5\u5382\u65b9\u6cd5\u6839\u636e Base64 \u6570\u636e\u7684\u7279\u5f81\u81ea\u52a8\u5224\u65ad\u5a92\u4f53\u7c7b\u578b\uff08MIME\uff09\uff0c\u8fd9\u91cc\u5e94\u8bc6\u522b\u4e3a `image/jpeg`\u3002  \n     - \u521b\u5efa\u5e76\u8fd4\u56de\u4e00\u4e2a `Image` \u5b9e\u4f8b\uff0c\u5185\u90e8\u5c5e\u6027 `media_type`\u3001`source`\u3001`data` \u5206\u522b\u4fdd\u5b58\u5a92\u4f53\u7c7b\u578b\u3001\u539f\u59cb Base64 \u6570\u636e\u4ee5\u53ca\u89e3\u7801\u540e\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff08\u5728\u6b64\u6d4b\u8bd5\u4e2d `source` \u4e0e `data` \u5747\u4e3a\u539f\u59cb Base64 \u5b57\u7b26\u4e32\uff09\u3002\n\n3. **\u8f93\u51fa/\u65ad\u8a00**  \n   - `assert image.media_type == \"image/jpeg\"`\uff1a\u786e\u8ba4\u81ea\u52a8\u68c0\u6d4b\u5f97\u5230\u7684 MIME \u7c7b\u578b\u6b63\u786e\u3002  \n   - `assert image.source == image.data == raw_base_64`\uff1a\u9a8c\u8bc1\u8fd4\u56de\u7684 `Image` \u5bf9\u8c61\u5728 `source` \u4e0e `data` \u5b57\u6bb5\u4e0a\u4fdd\u6301\u4e86\u539f\u59cb Base64 \u5185\u5bb9\uff0c\u786e\u4fdd\u672a\u88ab\u610f\u5916\u4fee\u6539\u3002\n\n\u6574\u4f53\u4e0a\uff0c\u8fd9\u6bb5\u6d4b\u8bd5\u786e\u4fdd `Image.autodetect` \u80fd\u591f\u5728\u4ec5\u63d0\u4f9b Base64 \u6570\u636e\u65f6\u6b63\u786e\u63a8\u65ad\u5a92\u4f53\u7c7b\u578b\u5e76\u5c01\u88c5\u4e3a\u7edf\u4e00\u7684 `Image` \u5bf9\u8c61\uff0c\u4f9b\u540e\u7eed\u591a\u6a21\u6001\u5904\u7406\u4f7f\u7528\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:51:19.359624"}