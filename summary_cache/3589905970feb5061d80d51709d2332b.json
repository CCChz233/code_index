{"summary": "- The code defines a function `handle_cerebras_json` that takes a Pydantic model class (`response_model`) and a dictionary of keyword arguments (`new_kwargs`). It constructs a system message containing instructions and the JSON schema of the provided model, then prepends it to the existing messages in `new_kwargs`. The function returns the original model class and the updated `kwargs`.\nWe need to produce final answer: summary content directly, no intro phrase. Should be Chinese (maybe mixed). Provide business logic, inputs, outputs. Let's craft.\n\nWe need to summarize functionality of the whole file? The prompt says \"Summarize the functionality of the following code.\" The code snippet includes imports and a function handle_cerebras_json. So summarizing that function is enough. Provide Chinese description.\n\nLet's produce:\n\n- \u8f93\u5165: response_model (\u7ee7\u627f\u81ea BaseModel \u7684 Pydantic \u7c7b), new_kwargs (\u5305\u542b \"messages\" \u952e\u7684 dict)\n- \u4e1a\u52a1\u903b\u8f91: \u751f\u6210\u7cfb\u7edf\u6307\u4ee4\u5b57\u7b26\u4e32\uff0c\u5305\u542b\u6a21\u578b\u7684 JSON schema\uff0c\u6784\u9020\u7cfb\u7edf\u6d88\u606f\u5e76\u653e\u5728 messages \u5217\u8868\u6700\u524d\u9762\u3002\n- \u8f93\u51fa: \u8fd4\u56de (response_model, \u66f4\u65b0\u540e\u7684 new_kwargs)\n\nAdd note about purpose: \u4e3a Cerebras JSON \u89e3\u6790\u63d0\u4f9b\u6307\u4ee4\uff0c\u786e\u4fdd\u8fd4\u56de\u7684 JSON \u80fd\u88ab\u6a21\u578b\u9a8c\u8bc1\u3002\n\nLet's produce final answer.assistantfinal- **\u8f93\u5165**  \n  - `response_model`: \u7ee7\u627f\u81ea `pydantic.BaseModel` \u7684\u6a21\u578b\u7c7b\uff0c\u7528\u4e8e\u751f\u6210\u5bf9\u5e94\u7684 JSON Schema\u3002  \n  - `new_kwargs`: \u5305\u542b `messages` \u952e\u7684\u5b57\u5178\uff0c`messages` \u662f OpenAI Chat API \u8981\u53d1\u9001\u7684\u6d88\u606f\u5217\u8868\u3002  \n\n- **\u4e1a\u52a1\u903b\u8f91**  \n  1. \u6839\u636e `response_model` \u8c03\u7528 `model_json_schema()` \u751f\u6210 JSON Schema\u3002  \n  2. \u6784\u9020\u7cfb\u7edf\u6307\u4ee4\u6587\u672c\uff0c\u8bf4\u660e\u52a9\u624b\u9700\u8981\u8fd4\u56de\u4ec5\u5305\u542b\u8be5 Schema \u80fd\u6210\u529f\u89e3\u6790\u7684 JSON \u5bf9\u8c61\u3002  \n  3. \u5c06\u7cfb\u7edf\u6307\u4ee4\u5305\u88c5\u6210 `{\"role\": \"system\", \"content\": instruction}` \u7684\u6d88\u606f\u5bf9\u8c61\uff0c**\u63d2\u5165**\u5230 `new_kwargs[\"messages\"]` \u7684\u6700\u524d\u7aef\uff0c\u786e\u4fdd\u5728\u540e\u7eed\u5bf9\u8bdd\u4e2d\u5148\u53d1\u9001\u8be5\u6307\u4ee4\u3002  \n\n- **\u8f93\u51fa**  \n  - \u8fd4\u56de\u4e00\u4e2a\u4e8c\u5143\u7ec4 `(response_model, new_kwargs)`\uff0c\u5176\u4e2d `new_kwargs` \u5df2\u7ecf\u88ab\u66f4\u65b0\uff0c`messages` \u5217\u8868\u9996\u4f4d\u4e3a\u7cfb\u7edf\u6307\u4ee4\uff0c\u5176\u4f59\u4fdd\u6301\u539f\u6837\u3002  \n\n**\u4f5c\u7528**\uff1a\u4e3a\u4f7f\u7528 Cere", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:44:42.258346"}