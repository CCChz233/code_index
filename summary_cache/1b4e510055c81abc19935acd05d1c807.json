{"summary": "We need to summarize functionality of code snippet. It's part of aiohttp multipart handling. The code defines imports, __all__, some global variables, and a function _get_part_reader that decides which reader class to use based on Content-Type header. It returns either a MultipartReader (for nested multipart) or BodyPartReader for regular part. It uses class attributes multipart_reader_cls, part_reader_cls, etc. It parses mimetype, checks if type is \"multipart\". If multipart_reader_cls is None, it uses type(self) (i.e., current class) to instantiate; else uses provided class. For non-multipart, returns BodyPartReader with boundary, headers, content, subtype, default charset.\n\nWe need to summarize business logic, inputs, outputs. Provide Chinese.\n\nLet's craft final answer.assistantfinal\u8be5\u7247\u6bb5\u5c5e\u4e8e **aiohttp** \u7684 multipart \u5904\u7406\u6a21\u5757\uff0c\u6838\u5fc3\u529f\u80fd\u662f\u6839\u636e HTTP \u54cd\u5e94\uff08\u6216\u8bf7\u6c42\uff09\u5934\u90e8\u7684 **Content\u2011Type** \u5b57\u6bb5\uff0c\u52a8\u6001\u9009\u62e9\u5e76\u5b9e\u4f8b\u5316\u5408\u9002\u7684\u5185\u5bb9\u8bfb\u53d6\u5668\u3002\n\n### \u5173\u952e\u4e1a\u52a1\u903b\u8f91\n1. **\u8f93\u5165**  \n   - `headers: CIMultiDictProxy[str]` \u2013 \u5305\u542b HTTP \u5934\u90e8\u7684\u53ea\u8bfb\u5b57\u5178\u3002  \n   - \u901a\u8fc7\u5b9e\u4f8b\u5c5e\u6027\uff08\u5982 `self._content`, `self._boundary`, `self._mimetype`, `self._default_charset`\uff09\u83b7\u53d6\u539f\u59cb\u5b57\u8282\u6d41\u3001\u5206\u754c\u7b26\u3001\u5df2\u89e3\u6790\u7684 MIME \u7c7b\u578b\u7b49\u4fe1\u606f\u3002\n\n2. **\u5904\u7406\u8fc7\u7a0b**  \n   - \u8bfb\u53d6 `Content-Type`\uff0c\u4f7f\u7528 `parse_mimetype` \u89e3\u6790\u5f97\u5230 `mimetype`\uff08\u5305\u62ec\u4e3b\u7c7b\u578b `type` \u4e0e\u5b50\u7c7b\u578b `subtype`\uff09\u3002  \n   - **\u82e5\u4e3b\u7c7b\u578b\u4e3a `multipart`**\uff1a  \n     - \u5224\u65ad\u5168\u5c40\u53d8\u91cf `multipart_reader_cls` \u662f\u5426\u5df2\u81ea\u5b9a\u4e49\u3002  \n     - \u82e5\u672a\u81ea\u5b9a\u4e49\uff0c\u5219\u4f7f\u7528\u5f53\u524d\u5b9e\u4f8b\u7684\u7c7b\uff08`type(self)`\uff09\u521b\u5efa **MultipartReader**\uff0c\u7528\u4e8e\u89e3\u6790\u5d4c\u5957\u7684 multipart \u5185\u5bb9\u3002  \n     - \u82e5\u5df2\u81ea\u5b9a\u4e49\uff0c\u5219\u5b9e\u4f8b\u5316\u8be5\u81ea\u5b9a\u4e49\u7c7b\uff0c\u4ee5\u5b9e\u73b0\u53ef\u63d2\u62d4\u7684 multipart \u89e3\u6790\u5668\u3002  \n   - **\u82e5\u4e3b\u7c7b\u578b\u4e0d\u662f `multipart`**\uff1a  \n     - \u5b9e\u4f8b\u5316 `BodyPartReader`\uff08\u9ed8\u8ba4\u7684\u5355\u90e8\u4ef6\u8bfb\u53d6\u5668\uff09\uff0c\u5e76\u4f20\u5165\u8fb9\u754c\u3001\u5934\u90e8\u3001\u539f\u59cb\u5185\u5bb9\u3001\u5b50\u7c7b\u578b\u4ee5\u53ca\u9ed8\u8ba4\u5b57\u7b26\u96c6\uff0c\u4ee5\u4fbf\u89e3\u6790\u666e\u901a\u7684\u975e multipart \u90e8\u5206\uff08\u5982 `application/json`\u3001`text/plain` \u7b49", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:50:24.189297"}