{"summary": "- The code defines a pytest plugin for aiohttp, providing utilities for testing asynchronous web applications.\n- It imports necessary modules and types, including asyncio, pytest, and aiohttp components.\n- It defines a generic type variable `_Request` bound to `BaseRequest`.\n- It defines an asynchronous function `go` that creates a `TestServer` instance with a given `Application` and optional port, starts the server, adds it to a global `servers` list, and returns the server instance.\nWe need to produce summary directly, no intro phrase. Provide Chinese (maybe bilingual). Should focus on business logic, inputs, outputs. Provide summary of functionality. Let's craft.assistantfinal\u63d0\u4f9b aiohttp \u7684 pytest \u63d2\u4ef6\uff0c\u5b9e\u73b0\u5bf9\u5f02\u6b65 Web \u5e94\u7528\u7684\u6d4b\u8bd5\u652f\u6301\u3002  \n- **\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91**\uff1a\u5c01\u88c5 `TestServer` \u7684\u521b\u5efa\u4e0e\u542f\u52a8\uff0c\u4f7f\u6d4b\u8bd5\u4ee3\u7801\u80fd\u591f\u4ee5\u7b80\u6d01\u7684\u65b9\u5f0f\u542f\u52a8\u4e34\u65f6\u670d\u52a1\u5668\u5e76\u5728\u6d4b\u8bd5\u7ed3\u675f\u540e\u7edf\u4e00\u6e05\u7406\u3002  \n- **\u8f93\u5165**\uff1a  \n  - `app: Application` \u2014\u2014 \u5f85\u6d4b\u8bd5\u7684 aiohttp \u5e94\u7528\u5b9e\u4f8b\u3002  \n  - `port: Optional[int]` \u2014\u2014 \u53ef\u9009\u7684\u76d1\u542c\u7aef\u53e3\uff0c\u672a\u6307\u5b9a\u65f6\u7531\u5185\u90e8\u673a\u5236\u81ea\u52a8\u5206\u914d\u3002  \n  - `**kwargs: Any` \u2014\u2014 \u4f20\u9012\u7ed9 `TestServer.start_server` \u7684\u989d\u5916\u542f\u52a8\u53c2\u6570\uff08\u5982 `host`\u3001`ssl_context` \u7b49\uff09\u3002  \n- **\u8f93\u51fa**\uff1a\u8fd4\u56de\u5df2\u542f\u52a8\u7684 `TestServer` \u5b9e\u4f8b\uff0c\u4f9b\u540e\u7eed\u7684 `TestClient` \u6216\u5176\u4ed6\u6d4b\u8bd5\u5de5\u5177\u4f7f\u7528\u3002  \n- **\u526f\u4f5c\u7528**\uff1a\u5c06\u521b\u5efa\u7684 `TestServer` \u5bf9\u8c61\u8ffd\u52a0\u5230\u5168\u5c40 `servers` \u5217\u8868\uff0c\u4ee5\u4fbf\u5728\u6d4b\u8bd5\u5957\u4ef6\u7684 teardown \u9636\u6bb5\u7edf\u4e00\u5173\u95ed\u6240\u6709\u670d\u52a1\u5668\u3002  \n\n\u7b80\u8a00\u4e4b\uff0c`go(app, port=None, **kwargs)` \u662f\u4e00\u4e2a\u5f02\u6b65\u5de5\u5382\u51fd\u6570\uff0c\u8d1f\u8d23\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u5feb\u901f\u642d\u5efa\u5e76\u542f\u52a8 aiohttp \u5e94\u7528\u7684\u4e34\u65f6\u670d\u52a1\u5668\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:59:13.501651"}