{"summary": "- Functionality: Parses a string containing multiple JSON lines, extracts data according to two possible formats (OpenAI or Anthropic), and maps the extracted data to a Pydantic model.\n- Input: `content` (string with JSON lines), `response_model` (a Pydantic model class).\n- Output: A tuple containing:\n  - A list of `response_model` instances populated with extracted data.\n  - A list of dictionaries representing the original JSON objects that failed to parse.\n- Business logic: Splits the string into lines, iterates through each line, loads JSON, determines the format (OpenAI or Anthropic), extracts arguments or text, constructs the model instance, and collects any errors.\nWe need to produce final answer: summary content directly, no preamble. Use Chinese (maybe mix English). Provide business logic, inputs, outputs. Let's craft.assistantfinal\u529f\u80fd\u6982\u8ff0  \n- **\u4e1a\u52a1\u903b\u8f91**\uff1a\u5c06\u5305\u542b\u591a\u884c JSON \u7684\u5b57\u7b26\u4e32\u9010\u884c\u89e3\u6790\uff0c\u4f9d\u636e\u4e24\u79cd\u53ef\u80fd\u7684\u8fd4\u56de\u7ed3\u6784\uff08OpenAI\u202ftool_calls \u6216 Anthropic\u202fcontent\uff09\u63d0\u53d6\u6709\u6548\u8d1f\u8f7d\uff0c\u5e76\u4f7f\u7528\u6307\u5b9a\u7684 Pydantic `response_model` \u5b9e\u4f8b\u5316\u5bf9\u8c61\uff1b\u89e3\u6790\u5931\u8d25\u7684\u884c\u4f1a\u539f\u6837\u4fdd\u5b58\u4e3a\u9519\u8bef\u5bf9\u8c61\u3002  \n- **\u8f93\u5165**  \n  1. `content: str` \u2013 \u591a\u884c\u6587\u672c\uff0c\u6bcf\u884c\u90fd\u662f\u5b8c\u6574\u7684 JSON \u5b57\u7b26\u4e32\u3002  \n  2. `response_model: type[T]` \u2013 \u7ee7\u627f\u81ea `pydantic.BaseModel` \u7684\u6a21\u578b\u7c7b\uff0c\u7528\u4e8e\u6620\u5c04\u63d0\u53d6\u51fa\u7684\u5b57\u6bb5\u3002  \n- **\u8f93\u51fa**  \n  - `list[T]` \u2013 \u6210\u529f\u89e3\u6790\u540e\uff0c\u6309\u6a21\u578b `response_model` \u6784\u9020\u7684\u5b9e\u4f8b\u5217\u8868\u3002  \n  - `list[dict[Any, Any]]` \u2013 \u89e3\u6790\u6216\u5b57\u6bb5\u63d0\u53d6\u8fc7\u7a0b\u4e2d\u629b\u5f02\u5e38\u7684\u539f\u59cb JSON \u5bf9\u8c61\u5217\u8868\uff08\u9519\u8bef\u8bb0\u5f55\uff09\u3002  \n\n\u5b9e\u73b0\u6b65\u9aa4  \n1. `content.splitlines()` \u2192 \u6309\u884c\u5207\u5206\u3002  \n2. \u5bf9\u6bcf\u884c\u6267\u884c `json.loads` \u8f6c\u4e3a\u5b57\u5178 `data`\u3002  \n3. \u5224\u65ad\u7ed3\u6784\uff1a  \n   - \u82e5 `data[\"response\"][\"body\"][\"choices\"][0][\"message\"]` \u5305\u542b `tool_calls`\uff08OpenAI \u683c\u5f0f\uff09\uff0c\u53d6 `tool_calls[0][\"function\"][\"arguments\"]` \u5e76\u518d\u6b21 `json.loads` \u83b7\u5f97\u53c2\u6570\u5b57\u5178\u3002  \n   - \u5426\u5219\u6309 Anthropic \u683c\u5f0f\uff0c\u4ece `data[\"result\"][\"message\"][\"content\"][0][\"", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:45:04.159472"}