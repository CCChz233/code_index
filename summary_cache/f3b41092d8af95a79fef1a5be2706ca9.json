{"summary": "- The code defines a module for handling various types of payloads in an asynchronous HTTP client/server framework.\n- It imports necessary modules and defines constants, types, and a registry for payload classes.\n- The `AsyncIterablePayload` class provides an asynchronous `write` method that iterates over an async iterable (like a ```````) and writes each chunk to a ``````.\nWe need to produce summary directly, no intro phrase. Focus on business logic, inputs, outputs. Use Chinese (maybe mix). Provide concise description. Let's craft. Mention that module defines payload handling, registry, payload types, constants, async write method. Input: async iterable, writer. Output: writes chunks to writer, consumes iterator. Also mention other payload classes defined elsewhere. Provide Chinese. Let's answer.assistantfinal\u5b9e\u73b0\u4e86\u5f02\u6b65 HTTP \u6846\u67b6\u7684 **payload** \u5904\u7406\u5c42\uff1a\n\n- **\u4e1a\u52a1\u903b\u8f91**\uff1a\u4e3a\u4e0d\u540c\u6570\u636e\u6765\u6e90\uff08bytes\u3001str\u3001\u6587\u4ef6\u6d41\u3001JSON\u3001\u5f02\u6b65\u53ef\u8fed\u4ee3\u5bf9\u8c61\u7b49\uff09\u63d0\u4f9b\u7edf\u4e00\u7684\u5c01\u88c5\u7c7b\uff0c\u7edf\u4e00\u5b9e\u73b0 `write(writer)` \u63a5\u53e3\uff0c\u5c06\u6570\u636e\u5199\u5165 `AbstractStreamWriter`\uff0c\u4ece\u800c\u5b8c\u6210 HTTP \u8bf7\u6c42/\u54cd\u5e94\u4f53\u7684\u53d1\u9001\u3002  \n- **\u6838\u5fc3\u7ec4\u4ef6**  \n  - `PAYLOAD_REGISTRY`\uff1a\u5168\u5c40\u6ce8\u518c\u8868\uff0c\u6620\u5c04 Python \u7c7b\u578b \u2192 \u5bf9\u5e94\u7684 `Payload` \u5b50\u7c7b\uff0c\u4f9b `get_payload()` \u52a8\u6001\u9009\u62e9\u5b9e\u73b0\u3002  \n  - `Payload` \u62bd\u8c61\u57fa\u7c7b\u53ca\u5176\u5b50\u7c7b\uff08`BytesPayload`\u3001`StringPayload`\u3001`IOBasePayload`\u3001`JsonPayload`\u3001`AsyncIterablePayload` \u7b49\uff09\uff0c\u6bcf\u4e2a\u5b50\u7c7b\u8d1f\u8d23\u628a\u7279\u5b9a\u8f93\u5165\u8f6c\u6362\u4e3a\u5b57\u8282\u6d41\u5e76\u8bbe\u7f6e\u5408\u9002\u7684 `Content-Type`\u3001`Content-Length`\u3001`Content-Disposition` \u7b49 HTTP \u5934\u3002  \n  - `TOO_LARGE_BYTES_BODY`\uff1a1\u202fMB \u9608\u503c\uff0c\u7528\u4e8e\u5728\u6784\u9020 `BytesPayload` \u65f6\u51b3\u5b9a\u662f\u5426\u8d70\u6d41\u5f0f\u53d1\u9001\u3002  \n- **`AsyncIterablePayload.write`**  \n  - **\u8f93\u5165**\uff1a`writer`\uff08\u5b9e\u73b0 `AbstractStreamWriter.write(chunk)` \u7684\u5bf9\u8c61\uff09\u4ee5\u53ca\u5185\u90e8\u4fdd\u5b58\u7684 `_iter`\uff08`AsyncIterator`\uff09\uff0c\u5373\u7528\u6237\u63d0\u4f9b\u7684\u5f02\u6b65\u53ef\u8fed\u4ee3\u6570\u636e\u6e90\uff08\u5982 `async for chunk in gen()`\uff09\u3002  \n  - **\u8fc7\u7a0b**\uff1a\u5728 `while True` \u5faa\u73af\u4e2d\u4f7f\u7528 `await self._iter.__anext__()` \u9010\u5757", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:54:24.823485"}