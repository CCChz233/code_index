{"summary": "We need to summarize the functionality of the code. The code is a test file for multimodal functionality. It imports pytest, Path, Image, convert_contents, convert_messages, Mode, patch, MagicMock. It defines a test function test_image_to_openai that creates an Image instance with source URL, media_type, data=None, then calls image.to_openai() and asserts that the returned dict has type \"image_url\" and image_url.url matches the source.\n\nThus the business logic: test that Image.to_openai correctly converts an Image object to OpenAI API format.\n\nInputs: Image object with source URL, media_type, data. Output: dict with type \"image_url\" and nested image_url dict containing url.\n\nThe test uses pytest.\n\nNow produce summary in Chinese (with English maybe). Must start directly with summary content, no \"This code does...\". So start with something like \"\u9a8c\u8bc1 Image \u7c7b\u7684 to_openai \u65b9\u6cd5...\" etc.\n\nLet's produce.assistantfinal\u9a8c\u8bc1 `Image` \u7c7b\u7684 `to_openai` \u65b9\u6cd5\u80fd\u591f\u5c06\u56fe\u7247\u5bf9\u8c61\u6b63\u786e\u8f6c\u6362\u4e3a OpenAI API \u6240\u9700\u7684 JSON \u7ed3\u6784\u3002  \n- **\u8f93\u5165**\uff1a`Image` \u5b9e\u4f8b\uff0c\u5c5e\u6027\u5305\u62ec `source`\uff08\u56fe\u7247 URL\uff09\u3001`media_type`\uff08\u5982 `image/jpeg`\uff09\u4ee5\u53ca `data`\uff08\u6b64\u5904\u4e3a `None`\uff09\u3002  \n- **\u4e1a\u52a1\u903b\u8f91**\uff1a\u8c03\u7528 `image.to_openai()`\uff0c\u5185\u90e8\u5e94\u751f\u6210\u5f62\u5982 `{\"type\": \"image_url\", \"image_url\": {\"url\": <source>}}` \u7684\u5b57\u5178\u3002  \n- **\u8f93\u51fa**\uff1a\u8fd4\u56de\u7684\u5b57\u5178\u5fc5\u987b\u6ee1\u8db3\uff1a`type` \u4e3a `\"image_url\"`\uff0c\u4e14 `image_url[\"url\"]` \u4e0e\u539f\u59cb `source` \u5b8c\u5168\u4e00\u81f4\u3002  \n- **\u6d4b\u8bd5\u6846\u67b6**\uff1a\u4f7f\u7528 `pytest`\uff0c\u901a\u8fc7\u65ad\u8a00\u68c0\u67e5\u8f6c\u6362\u7ed3\u679c\u7684\u952e\u503c\u5bf9\u662f\u5426\u7b26\u5408\u9884\u671f\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:50:07.485846"}