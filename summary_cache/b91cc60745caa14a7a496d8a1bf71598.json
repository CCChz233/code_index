{"summary": "We need to summarize the functionality of the code snippet. The code is from Lib/graphlib.py, defines TopologicalSorter and CycleError. It imports GenericAlias, defines __all__, constants, __class_getitem__ = classmethod(GenericAlias). Then __init__ method sets up internal structures: _node2info dict, _ready_nodes, counters. If graph provided, adds nodes and their predecessors.\n\nWe need to summarize business logic, inputs, outputs. The snippet only shows part of class. So we summarize that TopologicalSorter is a class for topological sorting of directed acyclic graphs, handling cycles via CycleError. It can be initialized with an optional graph dict mapping node to iterable of predecessors. It builds internal representation, tracks ready nodes, counts passed out and finished nodes. It provides methods (not shown) to add nodes, get next node, etc.\n\nWe need to output in Chinese (with maybe some English). Provide summary directly, no preamble.\n\nLet's craft answer.assistantfinalTopologicalSorter \u662f\u7528\u4e8e\u5bf9\u6709\u5411\u65e0\u73af\u56fe\uff08DAG\uff09\u8fdb\u884c\u62d3\u6251\u6392\u5e8f\u7684\u5de5\u5177\u7c7b\uff0c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5305\u62ec\uff1a\n\n- **\u8f93\u5165**\uff1a\u6784\u9020\u51fd\u6570\u63a5\u53d7\u53ef\u9009\u7684 `graph` \u53c2\u6570\uff0c\u683c\u5f0f\u4e3a `{node: [predecessor, ...]}` \u7684\u5b57\u5178\uff0c\u8868\u793a\u6bcf\u4e2a\u8282\u70b9\u53ca\u5176\u76f4\u63a5\u524d\u9a71\u96c6\u5408\u3002\u82e5\u672a\u63d0\u4f9b\uff0c\u5219\u53ef\u5728\u540e\u7eed\u901a\u8fc7 `add(node, *predecessors)` \u52a8\u6001\u6dfb\u52a0\u8282\u70b9\u53ca\u5176\u4f9d\u8d56\u5173\u7cfb\u3002\n- **\u5185\u90e8\u72b6\u6001**\uff1a\n  - `_node2info`\uff1a\u6620\u5c04\u6bcf\u4e2a\u8282\u70b9\u5230\u5176\u5185\u90e8\u4fe1\u606f\uff08\u5982\u524d\u9a71\u8ba1\u6570\u3001\u540e\u7ee7\u5217\u8868\u7b49\uff09\uff0c\u7528\u4e8e\u5feb\u901f\u67e5\u8be2\u548c\u66f4\u65b0\u8282\u70b9\u72b6\u6001\u3002\n  - `_ready_nodes`\uff1a\u4fdd\u5b58\u5f53\u524d\u6240\u6709\u201c\u5c31\u7eea\u201d\u8282\u70b9\u7684\u96c6\u5408\uff0c\u5373\u524d\u9a71\u5df2\u5168\u90e8\u5904\u7406\u5b8c\u6bd5\u3001\u53ef\u4ee5\u88ab\u8f93\u51fa\u7684\u8282\u70b9\u3002\n  - `_npassedout`\u3001`_nfinished`\uff1a\u5206\u522b\u8bb0\u5f55\u5df2\u88ab\u53d6\u51fa\uff08`next()`\uff09\u7684\u8282\u70b9\u6570\u548c\u5df2\u6807\u8bb0\u4e3a\u5b8c\u6210\u7684\u8282\u70b9\u6570\uff0c\u7528\u4e8e\u68c0\u6d4b\u6392\u5e8f\u662f\u5426\u7ed3\u675f\u6216\u662f\u5426\u51fa\u73b0\u73af\u3002\n- **\u8f93\u51fa**\uff1a\u5728\u540e\u7eed\u8c03\u7528\uff08\u672a\u5c55\u793a\uff09\u5982 `get_ready()`\u3001`next()`\u3001`done(node)` \u7b49\u65b9\u6cd5\u65f6\uff0c\u4f9d\u636e\u5185\u90e8\u8ba1\u6570\u548c `_ready_nodes` \u4ea7\u751f\u62d3\u6251\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\uff1b\u82e5\u68c0\u6d4b\u5230\u73af\u8def\uff0c\u5219\u629b\u51fa `CycleError`\u3002\n- **\u5f02\u5e38\u5904\u7406**\uff1a\u901a\u8fc7 `CycleError`\uff08\u5728\u6a21\u5757 `", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:53:39.883198"}