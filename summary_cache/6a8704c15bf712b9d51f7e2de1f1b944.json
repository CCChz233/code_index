{"summary": "- This code defines a class `Instructor` that provides a method `create_with_completion` for generating responses using OpenAI's chat completion API.\n- The method takes a list of `ChatCompletionMessageParam` objects (messages), a `response_model` type, and optional parameters such as `max_retries` (default 3), `validation_context` (deprecated), `context` (optional), and `strict` (default 1). \n- The method uses `create_fn` function to create an instance of `?` (the type). \nThe\n\n\u63d0\u4f9b\u4e00\u4e2a `Instructor` \u7c7b\uff0c\u7528\u4e8e\u8c03\u7528 OpenAI \u804a\u5929\u8865\u5168 API \u5e76\u8fd4\u56de\u7ed3\u6784\u5316\u7684\u54cd\u5e94\u6a21\u578b\u3002  \n- \u8f93\u5165\uff1a  \n  - `messages`: `ChatCompletionMessageParam` \u5217\u8868\uff0c\u6784\u6210\u5bf9\u8bdd\u4e0a\u4e0b\u6587\u3002  \n  - `response_model`: \u7ee7\u627f\u81ea `BaseModel`\uff08\u6216\u53ef\u8fed\u4ee3\u3001Partial\uff09\u7684\u7c7b\u578b\uff0c\u7528\u4e8e\u5c06 API \u539f\u59cb\u8fd4\u56de\u6570\u636e\u6620\u5c04\u4e3a\u5f3a\u7c7b\u578b\u5bf9\u8c61\u3002  \n  - \u53ef\u9009 `max_retries`\uff08\u9ed8\u8ba4 3\uff09\u63a7\u5236\u540c\u6b65/\u5f02\u6b65\u91cd\u8bd5\u7b56\u7565\uff1b`validation_context`\uff08\u5373\u5c06\u5e9f\u5f03\uff09\u548c `context` \u7528\u4e8e\u81ea\u5b9a\u4e49\u6821\u9a8c/\u4e0a\u4e0b\u6587\uff1b`strict`\uff08\u9ed8\u8ba4 True\uff09\u51b3\u5b9a\u6a21\u578b\u6821\u9a8c\u7684\u4e25\u683c\u7a0b\u5ea6\uff1b\u4ee5\u53ca\u5176\u4ed6\u5173\u952e\u5b57\u53c2\u6570\u3002  \n- \u4e1a\u52a1\u903b\u8f91\uff1a  \n  1. \u8c03\u7528 `handle_kwargs` \u9884\u5904\u7406\u989d\u5916\u53c2\u6570\u3002  \n  2. \u901a\u8fc7 `self.create_fn`\uff08\u5916\u90e8\u6ce8\u5165\u7684\u51fd\u6570\uff09\u53d1\u9001\u8bf7\u6c42\uff0c\u4f20\u5165\u6d88\u606f\u3001\u6a21\u578b\u7c7b\u578b\u3001\u91cd\u8bd5\u914d\u7f6e\u3001\u6821\u9a8c\u4e0a\u4e0b\u6587\u3001\u94a9\u5b50\u7b49\u3002  \n  3. `create_fn` \u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b\u5316\u7684 `response_model`\uff08\u6216\u5176\u96c6\u5408\uff09\uff0c\u8be5\u5b9e\u4f8b\u5185\u90e8\u4fdd\u5b58\u539f\u59cb API \u54cd\u5e94 `_raw_response`\u3002  \n- \u8f93\u51fa\uff1a\u8fd4\u56de\u4e00\u4e2a\u4e8c\u5143\u7ec4 `(model, raw_response)`\uff0c\u5176\u4e2d `model` \u4e3a\u7ed3\u6784\u5316\u7684\u4e1a\u52a1\u5bf9\u8c61\uff0c`raw_response` \u4e3a OpenAI \u539f\u59cb\u54cd\u5e94\uff1b\u82e5\u5728\u5f02\u6b65\u73af\u5883\u4e0b\u8c03\u7528\uff0c\u5219\u8fd4\u56de `Awaitable` \u5bf9\u8c61\u3002  \n- \u8be5\u7c7b\u8fd8\u7ef4\u62a4\u5168\u5c40 `client`\u3001`mode`\u3001`default_model`\u3001`provider`\u3001`hooks` \u7b49\u914d\u7f6e\uff0c\u7528\u4e8e\u7edf\u4e00\u7ba1\u7406 OpenAI \u5ba2\u6237\u7aef\u3001\u6a21\u578b\u9009\u62e9\u548c\u94a9\u5b50\u6269\u5c55\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:35:55.436366"}