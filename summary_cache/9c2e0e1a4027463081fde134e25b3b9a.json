{"summary": "The code defines a multipart handling module for aiohttp, providing classes and functions to parse and generate multipart HTTP messages. It includes a MultipartReader for reading multipart data, a MultipartWriter for constructing multipart bodies, and a BodyPartReader for reading individual parts. It also defines utilities for parsing content disposition headers and extracting filenames. The module handles various content encodings, supports compression, and integrates with aiohttp's payload and stream mechanisms. The _maybe_release_last_part method ensures that any partially read part is fully consumed and released, maintaining internal state consistency.\nThe user wants a summary of the functionality of the code, focusing on business logic, inputs, outputs, in Chinese (or Chinese/English). Must start directly with the summary content, no \"This code does...\" etc. So we need to produce a concise summary in Chinese, maybe with some English terms. Should mention that it's a multipart handling module for aiohttp, classes like MultipartReader, MultipartWriter, BodyPartReader, parsing content disposition, handling compression, etc. Also mention the _maybe_release_last_part method ensures fully consumed part. Provide inputs/outputs: inputs are multipart HTTP messages, outputs are parsed parts or constructed multipart bodies. Also mention integration with aiohttp payload and streams.\n\nLet's craft a Chinese summary. Ensure we start directly with the summary content. No leading phrase like \"This code\". So start with something like \"\u8be5\u6a21\u5757\u5b9e\u73b0\u4e86...\" etc.\n\nLet's produce.assistantfinal\u8be5\u6a21\u5757\u5b9e\u73b0\u4e86 aiohttp \u7684 multipart \u6d88\u606f\u5904\u7406\uff0c\u63d0\u4f9b\u4ee5\u4e0b\u6838\u5fc3\u4e1a\u52a1\u529f\u80fd\uff1a\n\n- **MultipartReader**\uff1a\u63a5\u53d7 HTTP \u8bf7\u6c42\u6216\u54cd\u5e94\u7684\u539f\u59cb\u6d41\uff08`StreamReader`\uff09\u4ee5\u53ca `Content-Type` \u4e2d\u7684 boundary \u53c2\u6570\uff0c\u9010\u6bb5\u89e3\u6790 multipart/form\u2011data\u3001multipart/mixed \u7b49\u683c\u5f0f\uff0c\u8fd4\u56de **BodyPartReader** \u5b9e\u4f8b\u3002\u6bcf\u4e2a `BodyPartReader` \u5305\u542b\u5df2\u89e3\u6790\u7684 **Payload**\uff08\u5982 `StringPayload`\u3001`JsonPayload` \u7b49\uff09\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684 `Content-Type`\u3001`Content-Disposition` \u7b49\u5934\u4fe1\u606f\uff0c\u4f9b\u4e1a\u52a1\u5c42\u8bfb\u53d6\u6587\u4ef6\u3001\u8868\u5355\u5b57\u6bb5\u6216 JSON \u6570\u636e\u3002\n\n- **MultipartWriter**\uff1a\u6839\u636e\u4e1a\u52a1\u4ee3\u7801\u63d0\u4f9b\u7684\u591a\u4e2a **Payload**\uff08\u6587\u4ef6\u6d41\u3001\u5b57\u7b26\u4e32\u3001JSON \u7b49\uff09\u548c\u53ef\u9009\u7684 `Content-Disposition`\u3001`Content-Type`\u3001`Content-Transfer-Encoding` \u7b49\u5143\u6570\u636e\uff0c\u81ea\u52a8\u751f\u6210\u7b26\u5408 RFC 7578 \u7684 multipart \u6d88\u606f\u4f53\u53ca\u76f8\u5e94\u7684 `Content-Type: multipart/...; boundary=...` \u5934\u90e8\uff0c\u8fd4\u56de\u53ef\u76f4\u63a5\u5199\u5165 `aiohttp`", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:50:48.001706"}