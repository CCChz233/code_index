{"summary": "We need to summarize the functionality of the code snippet. The snippet is from aiohttp/multipart.py, includes imports and defines a write method of a class (likely MultipartWriter). The method writes multipart/form-data body to a writer (async). It iterates over parts, writes boundary, headers, optionally compresses or encodes payload, writes part content, then final boundary.\n\nWe need to focus on business logic, inputs, outputs. Provide Chinese summary.\n\nLet's craft: The method `write` takes an async writer object and a flag `close_boundary`. It loops through stored parts (payload, encoding, transfer-encoding). For each part, ensures form-data disposition includes name. Writes boundary line, part headers, then writes payload. If encoding or transfer-encoding specified, wraps writer with `MultipartPayloadWriter` that can apply compression (e.g., gzip) or content-transfer-encoding (e.g., base64). After writing part, writes CRLF. Finally, if `close_boundary` true, writes closing boundary line.\n\nOutputs: writes bytes to the provided writer; returns None.\n\nNow produce final answer.assistantfinal\u8be5 `write` \u65b9\u6cd5\u5c5e\u4e8e `MultipartWriter`\uff08\u7528\u4e8e\u6784\u9020 multipart/form\u2011data \u8bf7\u6c42\u4f53\uff09\uff0c\u5176\u4e1a\u52a1\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n1. **\u8f93\u5165**  \n   - `writer`\uff1a\u5b9e\u73b0\u4e86 `write(bytes)` \u5f02\u6b65\u63a5\u53e3\u7684\u5bf9\u8c61\uff08\u5982 `aiohttp.StreamWriter`\uff09\uff0c\u8d1f\u8d23\u628a\u751f\u6210\u7684\u5b57\u8282\u6d41\u5199\u5165\u5e95\u5c42\u4f20\u8f93\u901a\u9053\u3002  \n   - `close_boundary`\uff08\u53ef\u9009\uff0c\u9ed8\u8ba4 `True`\uff09\uff1a\u662f\u5426\u5728\u672b\u5c3e\u5199\u5165\u7ed3\u675f\u8fb9\u754c `--<boundary>--\\r\\n`\u3002\n\n2. **\u5185\u90e8\u6570\u636e**  \n   - `self._parts`\uff1a\u4fdd\u5b58\u7684\u6bcf\u4e2a\u5b50\u90e8\u4ef6\u7684\u4e09\u5143\u7ec4 `(payload, encoding, te_encoding)`\uff0c\u5176\u4e2d  \n     * `payload` \u4e3a `Payload` \u5b50\u7c7b\u5b9e\u4f8b\uff0c\u5c01\u88c5\u4e86\u5b9e\u9645\u7684\u5185\u5bb9\uff08\u6587\u4ef6\u3001\u5b57\u7b26\u4e32\u3001JSON \u7b49\uff09\u3002  \n     * `encoding` \u4e3a\u5185\u5bb9\u538b\u7f29\u65b9\u5f0f\uff08\u5982 `gzip`\uff09\uff0c\u5bf9\u5e94 `CONTENT_ENCODING`\u3002  \n     * `te_encoding` \u4e3a\u4f20\u8f93\u7f16\u7801\u65b9\u5f0f\uff08\u5982 `base64`\uff09\uff0c\u5bf9\u5e94 `CONTENT_TRANSFER_ENCODING`\u3002  \n   - `self._boundary`\uff1a\u5f53\u524d multipart \u6d88\u606f\u4f7f\u7528\u7684\u5206\u9694\u7b26\u3002  \n   - `self._is_form_data`\uff1a\u6807\u8bb0\u662f\u5426\u4e3a `multipart/form-data`\uff0c\u82e5\u662f\u5219\u4f1a\u68c0\u67e5 `Content\u2011Disposition` \u5fc5\u987b\u5305\u542b `name=`\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:51:44.472968"}