{"summary": "- The code defines a resolver module for asynchronous DNS resolution in aiohttp.\n- It imports necessary modules and defines a `ThreadedResolver` class.\n- The `resolve` method takes a `host` and `port` as input, and returns a list of `ResolveResult` objects.\n- The method uses `asyncio` and `socket` to perform DNS lookup.\n- It handles IPv4 and IPv6 (including link\u2011local IPv IPv6) \nWe need to produce a summary directly, no intro. Should be Chinese, maybe mix English. Provide business logic, inputs, outputs. Let's craft.assistantfinal\u5b9e\u73b0 **aiohttp** \u5f02\u6b65 DNS \u89e3\u6790\u7684\u6838\u5fc3\u6a21\u5757\u3002  \n- **\u8f93\u5165**\uff1a`host`\uff08\u57df\u540d\u6216 IP \u5b57\u7b26\u4e32\uff09\uff0c`port`\uff08\u9ed8\u8ba4 0\uff09\uff0c`family`\uff08`socket.AF_INET` \u6216 `AF_INET6`\uff09\uff0c\u4ee5\u53ca\u5185\u90e8\u7684\u4e8b\u4ef6\u5faa\u73af (`self._loop`)\u3002  \n- **\u4e1a\u52a1\u903b\u8f91**\uff1a  \n  1. \u8c03\u7528 `loop.getaddrinfo` \u8fdb\u884c\u7cfb\u7edf\u7ea7\u5730\u5740\u89e3\u6790\uff0c\u9650\u5b9a\u4e3a TCP (`SOCK_STREAM`) \u5e76\u4f7f\u7528 `AI_ADDRCONFIG` \u6807\u5fd7\uff0c\u4ec5\u8fd4\u56de\u5f53\u524d\u7f51\u7edc\u73af\u5883\u53ef\u7528\u7684\u5730\u5740\u65cf\u3002  \n  2. \u904d\u5386\u8fd4\u56de\u7684 `addrinfo` \u5217\u8868\uff0c\u5206\u522b\u5904\u7406 IPv4 \u4e0e IPv6\uff1a  \n     - IPv4 \u76f4\u63a5\u53d6 `(address, port)`\u3002  \n     - IPv6 \u9700\u68c0\u67e5\u662f\u5426\u5305\u542b\u4f5c\u7528\u57df ID\uff08\u7b2c 4 \u9879\uff09\uff0c\u82e5\u6709\u5219\u4f7f\u7528 `loop.getnameinfo` \u8fdb\u4e00\u6b65\u89e3\u6790\u51fa\u4e3b\u673a\u540d\u548c\u7aef\u53e3\uff0c\u786e\u4fdd\u5bf9 link\u2011local IPv6\uff08\u5982 `fe80::%eth0`\uff09\u7684\u6b63\u786e\u89e3\u6790\u3002  \n  3. \u5bf9\u6bcf\u6761\u8bb0\u5f55\u6784\u9020 `ResolveResult`\uff0c\u586b\u5145 `hostname`\uff08\u539f\u59cb\u8bf7\u6c42\u7684 host\uff09\u3001`host`\uff08\u89e3\u6790\u5f97\u5230\u7684 IP\uff09\u3001`port`\u3001`family`\u3001`proto`\u3001\u4ee5\u53ca\u6570\u503c\u5316\u7684 socket \u6807\u5fd7 (`AI_NUMERICHOST | AI_NUMERICSERV`)\u3002  \n- **\u8f93\u51fa**\uff1a`List[ResolveResult]`\uff0c\u6bcf\u4e2a\u5143\u7d20\u5c01\u88c5\u4e00\u6b21\u89e3\u6790\u7ed3\u679c\uff0c\u4f9b\u4e0a\u5c42 HTTP \u5ba2\u6237\u7aef\u5728\u5efa\u7acb\u8fde\u63a5\u65f6\u4f7f\u7528\u3002  \n\n\u6a21\u5757\u8fd8\u6839\u636e\u662f\u5426\u53ef\u7528 `aiodns` \u52a8\u6001\u9009\u62e9\u9ed8\u8ba4\u89e3\u6790\u5668\u5b9e\u73b0\uff08`AsyncResolver` \u6216 `ThreadedResolver`\uff09\uff0c\u4f46\u6838\u5fc3\u4e1a\u52a1\u662f\u4e0a\u8ff0\u7684\u5f02\u6b65\u3001\u8de8\u5e73\u53f0 DNS \u89e3\u6790\u5e76\u7edf\u4e00\u8fd4\u56de", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T21:02:17.220786"}