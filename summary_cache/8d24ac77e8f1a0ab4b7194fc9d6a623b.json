{"summary": "The code defines a test suite for a Python module `instructor.utils`. It includes test cases.\nWe need to summarize functionality of the code. Provide business logic, inputs, outputs. Chinese. No intro phrase. Just start with summary. Provide description of test suite. Mention functions being tested. Provide inputs and expected outputs. Let's craft.assistantfinal\u8be5\u6587\u4ef6\u662f\u9488\u5bf9 `instructor.utils` \u6a21\u5757\u7684\u5355\u5143\u6d4b\u8bd5\u96c6\u5408\uff0c\u4f7f\u7528 **pytest** \u6846\u67b6\u7f16\u5199\uff0c\u4e3b\u8981\u9a8c\u8bc1\u5de5\u5177\u51fd\u6570\u7684\u884c\u4e3a\uff1a\n\n| \u88ab\u6d4b\u51fd\u6570 | \u4e1a\u52a1\u542b\u4e49 | \u8f93\u5165 | \u9884\u671f\u8f93\u51fa |\n|----------|----------|------|----------|\n| `combine_system_messages(existing, new)` | \u5408\u5e76\u7cfb\u7edf\u7ea7\u522b\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u82e5\u5df2\u6709\u63d0\u793a\u4e3a `None` \u6216\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u65b0\u63d0\u793a\uff1b\u5426\u5219\u5728\u4e24\u8005\u4e4b\u95f4\u52a0\u5165\u6362\u884c\u7b26\u3002 | `existing=None`, `new=\"New\"` | `\"New\"` |\n| `combine_system_messages(existing, new)`\uff08\u5176\u4ed6\u6d4b\u8bd5\uff09 | \u540c\u4e0a\uff0c\u9a8c\u8bc1\u5df2\u6709\u63d0\u793a\u4e3a\u666e\u901a\u5b57\u7b26\u4e32\u65f6\u7684\u62fc\u63a5\u903b\u8f91\u3002 | `existing=\"Old\"`, `new=\"New\"` | `\"Old\\nNew\"` |\n| `merge_consecutive_messages(messages)` | \u5c06\u8fde\u7eed\u7684\u540c\u89d2\u8272\uff08role\uff09\u6d88\u606f\u5408\u5e76\u4e3a\u5355\u6761\uff0c\u9632\u6b62\u5197\u4f59\u3002 | `messages=[{'role':'assistant','content':'a'},{'role':'assistant','content':'b'}]` | `[{'role':'assistant','content':'ab'}]` |\n| `extract_json_from_codeblock(text)` | \u4ece Markdown \u4ee3\u7801\u5757\u4e2d\u63d0\u53d6 JSON \u5b57\u7b26\u4e32\u5e76\u89e3\u6790\u4e3a Python \u5bf9\u8c61\u3002 | \u5305\u542b ```json\\n{...}\\n``` \u7684\u6587\u672c | \u5bf9\u5e94\u7684 dict/list \u5bf9\u8c61 |\n| `extract_json_from_stream(stream)` / `extract_json_from_stream_async(stream)` | \u9010\u5757\u8bfb\u53d6\u6d41\uff08\u540c\u6b65\u6216\u5f02\u6b65\uff09\uff0c\u4ece\u6bcf\u5757\u4e2d\u63d0\u53d6 JSON \u5e76\u8fd4\u56de\u751f\u6210\u5668/\u5f02\u6b65\u751f\u6210\u5668\u3002 | \u53ef\u8fed\u4ee3\u7684\u5b57\u8282/\u5b57\u7b26\u4e32\u6d41 | \u4f9d\u6b21\u4ea7\u51fa\u89e3\u6790\u540e\u7684 JSON \u5bf9\u8c61 |\n| `extract_system_messages(messages)` | \u4ece\u6d88\u606f\u5217\u8868\u4e2d\u7b5b\u9009\u51fa `role='system'` \u7684\u6761\u76ee\u3002 | `messages=[{'role':'system','content':'...'},...]` | \u53ea\u5305\u542b\u7cfb\u7edf\u6d88\u606f\u7684\u5b50\u5217\u8868 |\n| `classproperty` | \u5b9e\u73b0\u7c7b\u5c5e\u6027\u7684\u88c5\u9970\u5668\uff0c\u4f7f\u5c5e\u6027\u53ef\u901a\u8fc7\u7c7b\u672c\u8eab\u8bbf\u95ee\u800c\u65e0\u9700\u5b9e\u4f8b\u5316\u3002 | \u5728", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:52:20.193024"}