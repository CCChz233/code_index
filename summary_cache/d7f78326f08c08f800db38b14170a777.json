{"summary": "The code defines a test case for ****...... ... ... ... ... ... ... ... ... ... ... \nWe need to summarize functionality of the code. The code is a test file for utils functions. It imports json, pytest, and functions from instructor.utils: classproperty, extract_json_from_codeblock, extract_json_from_stream, extract_json_from_stream_async, merge_consecutive_messages, extract_system_messages, combine_system_messages. Then defines test_merge_consecutive_messages which creates a list of messages with consecutive same role entries, calls merge_consecutive_messages, expects result where consecutive messages of same role are merged with double newline separator.\n\nThus summary: This test verifies that merge_consecutive_messages merges adjacent messages with same role into a single message, concatenating contents separated by two newlines. Input: list of dict messages; output: merged list.\n\nWe need to follow requirements: start directly with summary content, no \"This code does\". Focus on business logic, inputs, outputs. Use Chinese (maybe bilingual). Provide summary.\n\nLet's produce.assistantfinal\u9a8c\u8bc1 `merge_consecutive_messages` \u7684\u4e1a\u52a1\u884c\u4e3a\uff1a  \n- **\u8f93\u5165**\uff1a\u4e00\u4e2a\u6309\u65f6\u95f4\u987a\u5e8f\u6392\u5217\u7684\u6d88\u606f\u5217\u8868\uff0c\u6bcf\u6761\u6d88\u606f\u4e3a `{\"role\": <\"user\"|\"assistant\">, \"content\": <string>}`\uff0c\u5176\u4e2d\u53ef\u80fd\u51fa\u73b0\u540c\u4e00\u89d2\u8272\u7684\u8fde\u7eed\u6d88\u606f\u3002  \n- **\u5904\u7406**\uff1a\u51fd\u6570\u904d\u5386\u5217\u8868\uff0c\u68c0\u6d4b\u76f8\u90bb\u6d88\u606f\u7684 `role` \u662f\u5426\u76f8\u540c\uff1b\u82e5\u76f8\u540c\uff0c\u5219\u5c06\u5b83\u4eec\u7684 `content` \u7528 `\"\\n\\n\"`\uff08\u4e24\u4e2a\u6362\u884c\uff09\u62fc\u63a5\u6210\u5355\u6761\u6d88\u606f\uff1b\u5426\u5219\u4fdd\u6301\u539f\u6837\u5e76\u5f00\u542f\u65b0\u5206\u7ec4\u3002  \n- **\u8f93\u51fa**\uff1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u5217\u8868\uff0c\u8fde\u7eed\u540c\u89d2\u8272\u7684\u6d88\u606f\u5df2\u5408\u5e76\uff0c\u793a\u4f8b\u4e2d `user` \u7684\u4e24\u6761 `\"Hello\"`\u3001`\"How are you\"` \u5408\u5e76\u4e3a `\"Hello\\n\\nHow are you\"`\uff0c`assistant` \u7684\u4e24\u6761 `\"Hello\"`\u3001`\"I am good\"` \u5408\u5e76\u4e3a `\"Hello\\n\\nI am good\"`\u3002  \n\n\u8be5\u6d4b\u8bd5\u901a\u8fc7\u65ad\u8a00 `result` \u4e0e\u9884\u671f\u5408\u5e76\u540e\u7684\u7ed3\u6784\u5b8c\u5168\u76f8\u7b49\uff0c\u786e\u4fdd\u51fd\u6570\u5728\u5408\u5e76\u8fde\u7eed\u5bf9\u8bdd\u65f6\u7684\u6b63\u786e\u6027\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:51:52.579951"}