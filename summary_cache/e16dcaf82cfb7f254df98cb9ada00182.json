{"summary": "We need to summarize the functionality of the code snippet. The code is from aiohttp/web_fileresponse.py. It defines FileResponse class and imports. The snippet includes imports, constants, and a method _precondition_failed. The summary should focus on business logic, inputs, outputs. Provide Chinese. Should start directly with summary content, no preamble.\n\nLet's craft a concise summary: The module provides FileResponse, a subclass of StreamResponse, used to serve static files over HTTP in aiohttp. It determines MIME type, handles content encoding, range requests, conditional requests (If-None-Match, If-Modified-Since), supports sendfile optimization unless disabled via env var, and returns appropriate HTTP status codes (200, 206, 304, 403, 404, 416, 412). The _precondition_failed method sets status 412 and empty body, then prepares response.\n\nWe need to mention inputs: request object, file path, optional headers, chunk callback. Outputs: HTTP response stream.\n\nLet's produce final answer.assistantfinal\u63d0\u4f9b\u5bf9\u672c\u5730\u6587\u4ef6\u7684 HTTP \u54cd\u5e94\u5c01\u88c5\uff0c\u4e3b\u8981\u7528\u4e8e aiohttp \u6846\u67b6\u4e2d\u8fd4\u56de\u9759\u6001\u6587\u4ef6\u3002  \n\n- **\u4e1a\u52a1\u903b\u8f91**  \n  - \u6839\u636e\u4f20\u5165\u7684\u6587\u4ef6\u8def\u5f84\uff08`PathLike`\uff09\u548c\u8bf7\u6c42\u5bf9\u8c61 (`BaseRequest`) \u751f\u6210 `FileResponse`\uff0c\u81ea\u52a8\u63a8\u65ad MIME \u7c7b\u578b\u3001\u652f\u6301\u5e38\u89c1\u538b\u7f29\u6269\u5c55 (`.gz`, `.br` \u7b49) \u5e76\u5728\u5fc5\u8981\u65f6\u56de\u9000\u5230 `application/octet-stream`\u3002  \n  - \u5b9e\u73b0 HTTP \u6761\u4ef6\u8bf7\u6c42\uff08`If-None-Match`\u3001`If-Modified-Since`\uff09\u4ee5\u53ca\u8303\u56f4\u8bf7\u6c42\uff08`Range`\uff09\uff0c\u5728\u6ee1\u8db3\u6761\u4ef6\u65f6\u8fd4\u56de `304 Not Modified`\u3001`206 Partial Content` \u6216 `416 Range Not Satisfiable`\u3002  \n  - \u9ed8\u8ba4\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684 `sendfile` \u96f6\u62f7\u8d1d\u673a\u5236\u63d0\u5347\u4f20\u8f93\u6548\u7387\uff0c\u82e5\u73af\u5883\u53d8\u91cf `AIOHTTP_NOSENDFILE` \u4e3a\u771f\u5219\u56de\u9000\u5230\u666e\u901a\u8bfb\u53d6\u5faa\u73af\u3002  \n  - \u652f\u6301\u81ea\u5b9a\u4e49\u7684\u5757\u53d1\u9001\u56de\u8c03 (`_T_OnChunkSent`) \u7528\u4e8e\u5728\u6bcf\u6b21\u5199\u5165\u5b57\u8282\u5757\u540e\u6267\u884c\u5f02\u6b65\u64cd\u4f5c\uff08\u5982\u65e5\u5fd7\u3001\u8fdb\u5ea6\u7edf\u8ba1\uff09\u3002  \n  - \u7edf\u4e00\u5904\u7406\u9519\u8bef\u72b6\u6001\uff1a\u6587\u4ef6\u4e0d\u5b58\u5728\u8fd4\u56de `404 Not Found`\uff0c\u8def\u5f84\u6307\u5411\u975e\u666e\u901a\u6587\u4ef6\u8fd4\u56de `403 Forbidden`\uff0c\u9884\u68c0\u5931\u8d25\u8fd4\u56de `412 Precondition Failed`\u3002  \n\n- **\u8f93\u5165**", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:36:35.594547"}