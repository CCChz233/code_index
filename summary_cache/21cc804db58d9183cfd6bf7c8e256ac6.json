{"summary": "- This module defines a function `handle_tools` that modifies a response model and its keyword arguments for OpenAI API calls.\n- The function takes a response model class (subclass of `BaseModel`) and a dictionary of `new_kwargs` (likely a set of parameters for the API request).\n- It adds a `tools` entry to `new_kwargs` containing a function definition (the model's `openai_schema`), which is used to define the tool (function) that the model can select.\n- It also adds a specific `tool_choice` to `WeChat` (the `...` ...). The summary should be ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ...\nWe need to produce a summary of the functionality of the code. The code snippet includes imports and a function handle_tools. The summary should be in Chinese (or Chinese/English). Must start directly with the summary content, no preamble. Should focus on business logic, inputs, outputs. So we need to describe that handle_tools modifies kwargs for OpenAI API calls, adding tools and tool_choice based on response model's openai_schema. It returns the response model and updated kwargs.\n\nLet's produce a concise Chinese summary. Also mention that response_model must be a subclass of BaseModel and has openai_schema attribute (provided by OpenAISchema). The function returns a tuple (type[T], dict). That's it.\n\nLet's produce final answer.assistantfinal\u8be5\u6a21\u5757\u63d0\u4f9b `handle_tools` \u51fd\u6570\uff0c\u7528\u4e8e\u5728\u8c03\u7528 OpenAI ChatCompletion \u63a5\u53e3\u65f6\u81ea\u52a8\u6ce8\u5165\u51fd\u6570\u5de5\u5177\uff08function tool\uff09\u914d\u7f6e\u3002  \n\n**\u4e1a\u52a1\u903b\u8f91**  \n1. \u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a  \n   - `response_model`\uff1a\u7ee7\u627f\u81ea `pydantic.BaseModel` \u7684\u6a21\u578b\u7c7b\uff0c\u5fc5\u987b\u5b9e\u73b0 `openai_schema`\uff08\u7531 `OpenAISchema` \u88c5\u9970\u5668\u751f\u6210\uff09\uff0c\u63cf\u8ff0\u6a21\u578b\u5bf9\u5e94\u7684\u51fd\u6570\u7b7e\u540d\u3002  \n   - `new_kwargs`\uff1a\u5b57\u5178\uff0c\u5305\u542b\u5373\u5c06\u4f20\u9012\u7ed9 OpenAI API \u7684\u8bf7\u6c42\u53c2\u6570\uff08\u5982 `messages`\u3001`model` \u7b49\uff09\u3002  \n2. \u5411 `new_kwargs` \u4e2d\u6dfb\u52a0 `tools` \u952e\uff0c\u503c\u4e3a\u5217\u8868\uff0c\u5217\u8868\u552f\u4e00\u5143\u7d20\u4e3a `{", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:43:41.450267"}