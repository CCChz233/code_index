{"summary": "The code defines ****...**... ... ... ... ... ...... ... ... ... ... \nWe need to produce a summary of the functionality of the code, focusing on business logic, inputs, outputs, in Chinese (with possibly English). Must start directly with the summary content, no preamble like \"This code does...\". So we need to write a concise description: The code defines a class CosineGreedy (maybe) with __call__ method that computes a cosine similarity between two spectra using a greedy matching algorithm within a tolerance. Input: two SpectrumType objects (spectrum, reference_spectrum). Output: a tuple (score, n_matches) where score is the cosine similarity (normalized dot product) and n_matches is number of matched peaks. The algorithm: compute pairwise m/z differences, filter by tolerance, compute product of intensities, then greedily select highest product matches, zero out rows/columns after each match, sum products, divide by sqrt of sum of squares of intensities (norms). Use numpy for vectorized operations. Provide details: tolerance attribute, etc.\n\nLet's produce a Chinese summary with some English terms maybe.\n\nWe must not start with \"This code defines...\" but directly with the summary content. So start with something like:\n\n\"\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8d2a\u5a6a\u5339\u914d\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\u8ba1\u7b97...\"\n\nLet's produce final answer.assistantfinal\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8d2a\u5a6a\u5339\u914d\u7684\u4f59\u5f26\u76f8\u4f3c\u5ea6\uff08Cosine Greedy\uff09\u8ba1\u7b97\u3002  \n**\u8f93\u5165**\uff1a\u4e24\u4e2a `SpectrumType` \u5b9e\u4f8b `spectrum` \u4e0e `reference_spectrum`\uff0c\u5206\u522b\u5305\u542b\u5cf0\u7684 m/z \u503c\u6570\u7ec4 `peaks.mz` \u4e0e\u5f3a\u5ea6\u6570\u7ec4 `peaks.intensities`\uff1b\u7c7b\u5b9e\u4f8b\u8fd8\u6301\u6709\u5339\u914d\u5bb9\u5dee `self.tolerance`\u3002  \n**\u4e1a\u52a1\u903b\u8f91**\uff1a  \n1. \u5c06\u4e24\u6761\u8c31\u56fe\u7684 m/z \u5411\u91cf\u5c55\u5f00\u4e3a\u77e9\u9635\uff0c\u8ba1\u7b97\u6240\u6709\u5cf0\u5bf9\u7684 m/z \u5dee\u503c\u77e9\u9635\u3002  \n2. \u540c\u7406\u5c55\u5f00\u5f3a\u5ea6\u5411\u91cf\uff0c\u5f97\u5230\u5f3a\u5ea6\u4e58\u79ef\u77e9\u9635\u3002  \n3. \u4f9d\u636e `|mz1\u2011mz2| \u2264 tolerance` \u751f\u6210\u63a9\u7801\uff0c\u4ec5\u4fdd\u7559\u5728\u5bb9\u5dee\u8303\u56f4\u5185\u7684\u5f3a\u5ea6\u4e58\u79ef\uff0c\u5176\u4f59\u7f6e\u96f6\u3002  \n4. \u5bf9\u4fdd\u7559\u7684\u4e58\u79ef\u503c\u6309\u964d\u5e8f\u6392\u5e8f\uff0c\u91c7\u7528\u8d2a\u5a6a\u7b56\u7565\u9010\u4e00\u5339\u914d\uff1a\u6bcf\u6b21\u9009\u53d6\u5f53\u524d\u6700\u5927\u4e58\u79ef\u5bf9\u5e94\u7684\u5cf0\u5bf9", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:42:28.270217"}