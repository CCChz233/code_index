{"summary": "```json\n{\n   \"key\": \"...\" \n...\n...\n ... \n`` \n...\n\n\n\n\nWe need to summarize functionality of code snippet. The code is incomplete but we can infer. It's a script make_sitemap.py that imports modules, defines async function process_file that takes path, content, content_hash, checks if path exists in existing_sitemap and hash matches, returns existing summary; otherwise calls summarize_content using OpenAI client to generate summary, returns dict with summary and hash; catches exception and logs error, returns failure summary. Also uses typer for CLI, rich for console output, tenacity for retries maybe. The script likely reads files, computes hash, builds sitemap JSON with summaries. Input: file path and content; output: tuple of path and dict containing summary and hash. Also uses async processing, progress bar, concurrency. Provide Chinese summary. Let's craft.assistantfinal\u8be5\u811a\u672c\u7528\u4e8e\u6279\u91cf\u4e3a\u9879\u76ee\u4e2d\u6587\u4ef6\u751f\u6210\u6458\u8981\u5e76\u6784\u5efa\u7ad9\u70b9\u5730\u56fe\uff08sitemap\uff09\uff0c\u6838\u5fc3\u4e1a\u52a1\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n1. **\u8f93\u5165**  \n   - \u6587\u4ef6\u8def\u5f84 `path`\u3001\u6587\u4ef6\u5185\u5bb9 `content`\uff08\u5b57\u7b26\u4e32\uff09\u4ee5\u53ca\u5185\u5bb9\u7684 SHA\u2011256 \u54c8\u5e0c `content_hash`\u3002  \n   - \u901a\u8fc7 `typer` \u63d0\u4f9b\u7684 CLI \u53c2\u6570\uff0c\u811a\u672c\u4f1a\u904d\u5386\u6307\u5b9a\u76ee\u5f55\u6216\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\uff08`yaml`\uff09\u5f97\u5230\u5f85\u5904\u7406\u7684\u6587\u4ef6\u5217\u8868\u3002\n\n2. **\u7f13\u5b58\u68c0\u67e5**  \n   - \u811a\u672c\u7ef4\u62a4\u4e00\u4e2a `existing_sitemap`\uff08\u4ece\u5df2\u6709\u7684 sitemap JSON/YAML \u4e2d\u52a0\u8f7d\uff09\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u6587\u4ef6\u7684\u6458\u8981\u548c\u5bf9\u5e94\u7684\u54c8\u5e0c\u3002  \n   - \u82e5\u5f53\u524d `path` \u5df2\u5b58\u5728\u4e14\u54c8\u5e0c\u76f8\u540c\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u7684\u6458\u8981\uff0c\u907f\u514d\u91cd\u590d\u8c03\u7528 OpenAI \u63a5\u53e3\u3002\n\n3. **\u6458\u8981\u751f\u6210**  \n   - \u5f53\u7f13\u5b58\u672a\u547d\u4e2d\u6216\u6587\u4ef6\u5185\u5bb9\u5df2\u53d8\u66f4\u65f6\uff0c\u8c03\u7528 `summarize_content(client, path, content)`\uff08`client` \u4e3a `AsyncOpenAI` \u5b9e\u4f8b\uff09\u5f02\u6b65\u751f\u6210\u6587\u4ef6\u6458\u8981\u3002  \n   - \u751f\u6210\u7684\u6458\u8981\u4e0e\u5f53\u524d\u54c8\u5e0c\u4e00\u8d77\u7ec4\u6210 `{ \"summary\": <text>, \"hash\": <content_hash> }`\uff0c\u4f5c\u4e3a\u8be5\u6587\u4ef6\u5728 sitemap \u4e2d\u7684\u8bb0\u5f55\u3002\n\n4. **\u9519\u8bef\u5904\u7406\u4e0e\u91cd\u8bd5**  \n   - \u901a\u8fc7 `tenacity`\uff08\u867d\u7136\u5728\u7247\u6bb5\u4e2d\u672a\u663e\u5f0f\u4f7f\u7528\uff09\u5b9e\u73b0\u5bf9 OpenAI \u8c03\u7528\u7684\u81ea\u52a8\u91cd\u8bd5\u3002  \n   - \u82e5\u591a\u6b21\u91cd\u8bd5\u4ecd\u5931\u8d25\uff0c\u6355\u83b7\u5f02\u5e38\u5e76\u4f7f\u7528 `rich.Console` \u8f93\u51fa\u7ea2\u8272\u9519\u8bef\u4fe1\u606f\uff0c", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:32:49.520397"}