{"summary": "The code defines a topological sorting utility with a class `TopologicalSorter`. It allows adding nodes and their predecessors (dependencies). It ensures that the nodes are hashable.\nWe need to summarize functionality of code snippet. Provide Chinese summary focusing on business logic, inputs, outputs. No intro phrase. Provide direct summary. Let's craft. Mention that class TopologicalSorter supports adding nodes, handling dependencies, preparing, iterating, detecting cycles, raising CycleError. Provide inputs: node and predecessors. Output: sorted order via get_ready, etc. But snippet only shows add method. However overall file includes TopologicalSorter and CycleError. Summarize overall functionality. Provide Chinese. Let's craft.assistantfinal\u5b9e\u73b0 **\u62d3\u6251\u6392\u5e8f** \u7684\u5de5\u5177\u7c7b `TopologicalSorter`\uff08\u4ee5\u53ca\u5bf9\u5e94\u7684\u5f02\u5e38 `CycleError`\uff09\uff0c\u7528\u4e8e\u5728\u6709\u5411\u65e0\u73af\u56fe\uff08DAG\uff09\u4e2d\u6309\u7167\u4f9d\u8d56\u5173\u7cfb\u751f\u6210\u53ef\u6267\u884c\u7684\u8282\u70b9\u5e8f\u5217\u3002\n\n**\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91**  \n1. **\u8282\u70b9\u6dfb\u52a0 (`add`)**  \n   - **\u8f93\u5165**\uff1a`node`\uff08\u4efb\u610f\u53ef\u54c8\u5e0c\u5bf9\u8c61\uff09\u4ee5\u53ca\u53ef\u53d8\u6570\u91cf\u7684 `predecessors`\uff08\u8be5\u8282\u70b9\u7684\u76f4\u63a5\u524d\u7f6e\u4f9d\u8d56\uff09\u3002  \n   - **\u5904\u7406**\uff1a  \n     - \u82e5\u5df2\u8c03\u7528 `prepare()`\uff0c\u629b\u51fa `ValueError`\uff0c\u7981\u6b62\u5728\u6392\u5e8f\u51c6\u5907\u9636\u6bb5\u540e\u518d\u4fee\u6539\u56fe\u7ed3\u6784\u3002  \n     - \u4e3a `node` \u521b\u5efa\u6216\u83b7\u53d6\u5185\u90e8\u8bb0\u5f55 (`_NodeInfo`) \u5e76\u7d2f\u8ba1\u5176\u524d\u7f6e\u4f9d\u8d56\u8ba1\u6570 `npredecessors`\u3002  \n     - \u5bf9\u6bcf\u4e2a\u524d\u7f6e\u8282\u70b9 `pred`\uff1a  \n       - \u82e5 `pred` \u672a\u51fa\u73b0\u8fc7\uff0c\u81ea\u52a8\u521b\u5efa\u5bf9\u5e94\u8bb0\u5f55\u5e76\u89c6\u4e3a\u65e0\u524d\u7f6e\u4f9d\u8d56\u7684\u5b64\u7acb\u8282\u70b9\u3002  \n       - \u5728 `pred` \u7684 `successors` \u5217\u8868\u4e2d\u8ffd\u52a0\u5f53\u524d `node`\uff0c\u5f62\u6210 \u201c\u524d\u7f6e \u2192 \u5f53\u524d\u201d \u7684\u6709\u5411\u8fb9\u3002  \n   - **\u8f93\u51fa**\uff1a\u65e0\u76f4\u63a5\u8fd4\u56de\u503c\uff0c\u526f\u4f5c\u7528\u662f\u66f4\u65b0\u5185\u90e8\u56fe\u7ed3\u6784\uff08\u8282\u70b9\u4fe1\u606f\u3001\u524d\u7f6e\u8ba1\u6570\u3001\u540e\u7ee7\u5217\u8868\uff09\u3002\n\n2. **\u51c6\u5907\u9636\u6bb5 (`prepare`)**  \n   - \u5728\u6240\u6709\u8282\u70b9\u6dfb\u52a0\u5b8c\u6bd5\u540e\u8c03\u7528\uff0c\u8ba1\u7b97\u53ef\u7acb\u5373\u6267\u884c\u7684\u8282\u70b9\u96c6\u5408\uff08\u524d\u7f6e\u8ba1\u6570\u4e3a 0\uff09\uff0c\u5e76\u9501\u5b9a\u56fe\u7ed3\u6784\uff0c\u7981\u6b62\u540e\u7eed `add` \u64cd\u4f5c\u3002\n\n3. **\u6392\u5e8f\u8fed\u4ee3**  \n   - \u901a\u8fc7 `get_ready()`\u3001`done(node)`\u3001`pop()` \u7b49\u65b9\u6cd5\u9010\u6b65\u53d6\u51fa\u5f53\u524d\u53ef\u6267\u884c\u8282\u70b9", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:53:48.221283"}