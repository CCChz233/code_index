{"summary": "We need to summarize the functionality of the code snippet. The code is from aiohttp/web_response.py, defines StreamResponse class and related functions. The snippet includes imports, constants, __all__, content coding mapping, __slots__, and a method _prepare_headers that prepares HTTP response headers based on request, compression, chunked encoding, content length, keep-alive, etc. It sets default headers like Date, Server, Content-Type, Transfer-Encoding, Content-Length, etc., and handles cookies, compression, and connection header.\n\nWe need to produce summary in Chinese (with possible English). Should focus on business logic, inputs, outputs. No \"This code does...\" etc. Just start with summary content.\n\nLet's craft: \"\u6839\u636e\u4f20\u5165\u7684\u8bf7\u6c42\u5bf9\u8c61\u548c\u54cd\u5e94\u5c5e\u6027\uff0c\u6784\u9020\u5e76\u586b\u5145 HTTP \u54cd\u5e94\u5934\u90e8\uff0c\u51b3\u5b9a\u662f\u5426\u4f7f\u7528\u5206\u5757\u4f20\u8f93\u3001\u538b\u7f29\u3001\u4fdd\u6301\u8fde\u63a5\u7b49\uff0c\u5e76\u81ea\u52a8\u6dfb\u52a0\u9ed8\u8ba4\u5b57\u6bb5\uff08Date\u3001Server\u3001Content-Type \u7b49\uff09\u4ee5\u53ca Cookie\u3002\u8fd4\u56de\u503c\u662f\u5f02\u6b65\u5b8c\u6210\u540e\u5185\u90e8\u72b6\u6001\u5df2\u66f4\u65b0\u7684\u54cd\u5e94\u5bf9\u8c61\uff0c\u540e\u7eed\u5199\u5165\u4f53\u6570\u636e\u65f6\u4f7f\u7528\u8fd9\u4e9b\u5934\u90e8\u3002\" Something like that.\n\nLet's produce final answer.assistantfinal\u6839\u636e\u4f20\u5165\u7684 `request` \u5bf9\u8c61\u4ee5\u53ca `StreamResponse` \u5b9e\u4f8b\u5185\u90e8\u5c5e\u6027\uff08\u5982 `_keep_alive`\u3001`_chunked`\u3001`_compression`\u3001`_cookies`\u3001`_status`\u3001`_headers`\u3001`_body` \u7b49\uff09\uff0c\u5f02\u6b65\u6784\u5efa\u5e76\u5b8c\u5584 HTTP \u54cd\u5e94\u5934\u90e8\uff1a\n\n* \u8bfb\u53d6\u8bf7\u6c42\u7684 keep\u2011alive\u3001HTTP \u7248\u672c\u7b49\u4fe1\u606f\uff0c\u51b3\u5b9a\u54cd\u5e94\u7684\u8fde\u63a5\u7b56\u7565\uff08`Connection: keep-alive` / `close`\uff09\u3002\n* \u82e5\u8bbe\u7f6e\u4e86 cookies\uff0c\u5219\u901a\u8fc7 `populate_with_cookies` \u5c06 `Set-Cookie` \u5199\u5165\u5934\u90e8\u3002\n* \u82e5\u542f\u7528\u4e86\u538b\u7f29\uff0c\u5219\u8c03\u7528 `_start_compression` \u6839\u636e\u8bf7\u6c42\u7684 `Accept\u2011Encoding` \u542f\u52a8\u76f8\u5e94\u7684 `Content\u2011Encoding`\uff08gzip/deflate\uff09\u3002\n* \u6839\u636e `_chunked` \u6807\u8bb0\u548c HTTP \u7248\u672c\u51b3\u5b9a\u662f\u5426\u4f7f\u7528\u5206\u5757\u4f20\u8f93\uff1a\n  * HTTP/1.1 \u4e14\u5f00\u542f\u5206\u5757\u65f6\uff0c\u5199\u5165 `Transfer-Encoding: chunked` \u5e76\u8ba9\u5e95\u5c42 `payload_writer` \u542f\u7528\u5206\u5757\u6a21\u5f0f\uff1b\n  * \u82e5\u4e0d\u4f7f\u7528\u5206\u5757\u4e14\u5f00\u542f\u957f\u5ea6\u68c0\u67e5\uff0c\u5219\u4f9d\u636e `content_length` \u8bbe\u7f6e `Content\u2011Length`\uff0c\u82e5\u957f\u5ea6\u672a\u77e5\u4e14\u534f\u8bae\u652f\u6301\u5219\u56de\u9000\u4e3a\u5206\u5757\u6216\u5173\u95ed keep\u2011alive\u3002\n* \u5bf9\u4e8e\u5fc5\u987b\u4e3a\u7a7a", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:56:34.241705"}