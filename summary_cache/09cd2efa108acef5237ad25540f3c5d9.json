{"summary": "We need to produce a summary in Chinese (or Chinese/English). The code defines a function from_anthropic that creates an Instructor instance (sync or async) from an Anthropic client. It validates mode, client type, handles prompt caching and beta features, selects appropriate create method, and returns Instructor or AsyncInstructor with patched create function.\n\nWe need to focus on business logic, inputs, outputs. Provide summary directly, no \"This code does...\". So start with something like:\n\n\u6839\u636e\u63d0\u4f9b\u7684 Anthropic \u5ba2\u6237\u7aef\u5b9e\u4f8b\uff0c\u6784\u9020\u5e76\u8fd4\u56de\u5bf9\u5e94\u7684 Instructor\uff08\u540c\u6b65\uff09\u6216 AsyncInstructor\uff08\u5f02\u6b65\uff09\u5bf9\u8c61\u3002...\n\nMake sure to mention inputs: client, mode, enable_prompt_caching, beta, **kwargs. Output: Instructor or AsyncInstructor. Business logic: asserts, selects create method based on flags, patches it, returns appropriate class based on client sync/async.\n\nLet's produce final answer.assistantfinal\u6839\u636e\u4f20\u5165\u7684 Anthropic \u5ba2\u6237\u7aef\u5b9e\u4f8b\uff08\u652f\u6301\u540c\u6b65\u3001\u5f02\u6b65\u3001Bedrock\u3001Vertex \u7b49\u591a\u79cd\u5b9e\u73b0\uff09\uff0c\u4ee5\u53ca\u53ef\u9009\u7684 `mode`\uff08`ANTHROPIC_JSON` \u6216 `ANTHROPIC_TOOLS`\uff09\u3001`enable_prompt_caching`\u3001`beta` \u6807\u5fd7\u548c\u5176\u4ed6\u5173\u952e\u5b57\u53c2\u6570\uff0c\u6784\u9020\u5e76\u8fd4\u56de\u5bf9\u5e94\u7684 `Instructor`\uff08\u540c\u6b65\uff09\u6216 `AsyncInstructor`\uff08\u5f02\u6b65\uff09\u5bf9\u8c61\u3002  \n\n\u6838\u5fc3\u4e1a\u52a1\u6d41\u7a0b\uff1a  \n1. **\u53c2\u6570\u6821\u9a8c**  \n   - `mode` \u5fc5\u987b\u662f `ANTHROPIC_JSON` \u6216 `ANTHROPIC_TOOLS`\u3002  \n   - `client` \u5fc5\u987b\u662f Anthropic \u5b98\u65b9\u63d0\u4f9b\u7684\u4efb\u610f\u5ba2\u6237\u7aef\u7c7b\u3002  \n\n2. **\u9009\u62e9\u6d88\u606f\u521b\u5efa\u51fd\u6570**  \n   - \u82e5 `enable_prompt_caching=True`\uff0c\u4ec5\u5728\u540c\u6b65\u6216\u5f02\u6b65 Anthropic \u5ba2\u6237\u7aef\u4e0a\u4f7f\u7528 `client.beta.prompt_caching.messages.create`\uff1b\u5426\u5219\u629b `TypeError`\u3002  \n   - \u82e5 `beta=True`\uff08\u4e14\u672a\u5f00\u542f\u7f13\u5b58\uff09\uff0c\u4f7f\u7528 `client.beta.messages.create`\u3002  \n   - \u9ed8\u8ba4\u4f7f\u7528 `client.messages.create`\u3002  \n\n3. **\u51fd\u6570\u5305\u88c5**  \n   - \u901a\u8fc7 `instructor.patch(create=..., mode=mode)` \u5bf9\u9009\u5b9a\u7684 `create` \u65b9\u6cd5\u8fdb\u884c\u5305\u88c5\uff0c\u4ee5\u9002\u914d\u4e0d\u540c\u7684\u8c03\u7528\u6a21\u5f0f\u3002  \n\n4. **\u5b9e\u4f8b\u5316\u8fd4\u56de**  \n   - \u540c\u6b65\u5ba2\u6237\u7aef\uff08`Anthropic`\u3001`AnthropicBedrock`\u3001`AnthropicVertex`\uff09\u8fd4\u56de `instructor.Instructor`\u3002  \n   -", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:46:43.616790"}