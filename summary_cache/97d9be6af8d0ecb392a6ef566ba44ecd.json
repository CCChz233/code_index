{"summary": "- The script benchmarks different write strategies for sending data over an asyncio TCP connection.\n- It forks a server process (using `os.fork`) to create a TCP server that listens on `PORT`.\n- The `writes` list defines the different **c** **...**... ... ... ... ... ... ... ... ... ... ... ... ... ... \nWe need to produce a summary of the functionality of the given code. The code is a Python script located at tools/bench-asyncio-write.py. It imports asyncio, atexit, math, os, signal, typing List, Tuple. It defines PORT = 8888. Then server = os.fork() (so it forks a process). Then writes = [ (\"b''.join\", write_joined_list), (\"bytearray\", write_joined_bytearray), (\"multiple writes\", write_separately), ] bodies = ( [], [10 * 2**0], [10 * 2**7], [10 * 2**17], [10 * 2**27], [50 * 2**27], [1 * 2**0 for _ in range(10)], [1 * 2**7 for _ in range(10)], [1 * 2**17 for _ in range(10)], [1 * 2**27 for _ in range(10)], [10 * 2**27 for _ in range(5)], ) jobs = [_job(j) for j in bodies] loop = asyncio.get_event_loop() results = loop.run_until_complete(main(loop)) async def main(loop): _, writer = await asyncio.open_connection(port=PORT) print(\"Loop:\", loop) print(\"Transport:\", writer._transport) res = [ (\"size/chunks\", \"Write option\", \"Mean\", \"Std dev\", \"loops\", \"Variation\"), ] res.append([\":---\", \":---\", \"---:\", \"---:\", \"---:\", \"---:\"]) async def bench(job_title, w, body, base=None): it, mean, sd = await time(loop, w[1], writer, c) res.append( ( job_title, w[0], fm_time(mean), fm_time(sd), str(it), f\"{mean / base - 1:.2%}\" if base is not None else \"\", ) ) return mean for t, c in jobs: print(\"Doing\", t) base = await bench(t, writes[0], c) for w in writes[1:]: await bench(\"\", w, c, base) return", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:33:57.317114"}