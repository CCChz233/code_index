{"summary": "- Provides a decorator `async_model_validator` for defining asynchronous validation functions in a Pydantic model.\n- The decorator validates the signature of the function: it must have only a single value (parameter) and possibly an optional `info` parameter of type `ValidationInfo`.\n- If the function signature is invalid, it raises `ValueError`.\n- The decorator attaches a custom attribute `__async_model_validator__` to the function.\n- The attached attribute contains a tuple (function, `requires_validation_context`), indicating whether the `info` parameter is required.\nWe need to produce final answer: summary content directly, no preamble. Should be Chinese (maybe bilingual). Provide business logic, inputs, outputs. Let's craft.assistantfinal\u63d0\u4f9b `async_model_validator` \u88c5\u9970\u5668\uff0c\u7528\u4e8e\u5728 Pydantic \u6a21\u578b\u4e2d\u58f0\u660e **\u5f02\u6b65** \u9a8c\u8bc1\u51fd\u6570\u3002  \n\n**\u4e1a\u52a1\u903b\u8f91**  \n1. \u88c5\u9970\u5668\u63a5\u53d7\u4e00\u4e2a\u666e\u901a\u51fd\u6570 `func`\uff0c\u68c0\u67e5\u5176\u7b7e\u540d\uff1a  \n   - \u53c2\u6570\u6570\u91cf\u53ea\u80fd\u662f 1\uff08\u4ec5\u503c\u53c2\u6570\uff09\u6216 2\uff08\u503c\u53c2\u6570 + `info` \u53c2\u6570\uff09\u3002  \n   - \u82e5\u51fa\u73b0 2 \u4e2a\u53c2\u6570\uff0c\u7b2c\u4e8c\u4e2a\u5fc5\u987b\u540d\u4e3a `info`\uff0c\u4e14\u6ce8\u89e3\u7c7b\u578b\u5fc5\u987b\u662f `pydantic.ValidationInfo`\u3002  \n   - \u4e0d\u6ee1\u8db3\u4e0a\u8ff0\u4efb\u4e00\u6761\u4ef6\u5747\u629b `ValueError`\uff0c\u963b\u6b62\u51fd\u6570\u6ce8\u518c\u3002  \n2. \u6839\u636e\u662f\u5426\u5305\u542b `info` \u53c2\u6570\uff0c\u8ba1\u7b97\u5e03\u5c14\u6807\u8bb0 `requires_validation_context`\uff08`True` \u8868\u793a\u9700\u8981\u9a8c\u8bc1\u4e0a\u4e0b\u6587\uff09\u3002  \n3. \u4f7f\u7528 `setattr` \u4e3a\u51fd\u6570\u52a8\u6001\u6dfb\u52a0\u5c5e\u6027 `__async_model_validator__`\uff0c\u5176\u503c\u4e3a `(func, requires_validation_context)` \u7684\u5143\u7ec4\uff0c\u4f9b Pydantic \u6846\u67b6\u5728\u6a21\u578b\u9a8c\u8bc1\u9636\u6bb5\u8bfb\u53d6\u3002  \n\n**\u8f93\u5165**  \n- \u88ab\u88c5\u9970\u7684\u51fd\u6570 `func`\uff0c\u5176\u7b7e\u540d\u5fc5\u987b\u7b26\u5408\u4e0a\u8ff0\u89c4\u5219\u3002  \n\n**\u8f93\u51fa**  \n- \u8fd4\u56de\u539f\u51fd\u6570\u672c\u8eab\uff08\u5df2\u5e26\u6709\u81ea\u5b9a\u4e49\u5c5e\u6027\uff09\uff0c\u4f9b\u540e\u7eed\u5f02\u6b65\u9a8c\u8bc1\u8c03\u7528\u65f6\u4f7f\u7528\u3002  \n\n**\u4f5c\u7528**  \n\u901a\u8fc7\u4e25\u683c\u7684\u7b7e\u540d\u6821\u9a8c\u548c\u5143\u6570\u636e\u6807\u8bb0\uff0c\u4f7f\u5f97 Pydantic \u80fd\u5728\u6a21\u578b\u5b9e\u4f8b\u5316\u65f6\u8bc6\u522b\u5e76\u6267\u884c\u7b26\u5408\u89c4\u8303\u7684\u5f02\u6b65\u9a8c\u8bc1\u903b\u8f91\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:46:57.825809"}