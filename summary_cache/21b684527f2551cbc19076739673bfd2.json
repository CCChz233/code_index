{"summary": "- The code defines a function `handle_gemini_tools` that processes a response model and updates keyword arguments for Gemini API calls.\n- It ensures that the `model` key is not present in the provided `new_kwargs` dictionary.\n- It imports `update_gemini_kwargs` from a local module.\n- It adds a `tools` entry to `new_kwargs` containing the Gemini schema of the response model.\n- It configures `tool_config` with a function call configuration.\n- The function returns a tuple of the original response model and updated ```````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````````\n\n\u5904\u7406 Gemini \u5de5\u5177\u7684\u51fd\u6570 `handle_gemini_tools`\uff0c\u63a5\u53d7\u54cd\u5e94\u6a21\u578b\u7c7b\u578b `response_model` \u548c\u5173\u952e\u5b57\u53c2\u6570\u5b57\u5178 `new_kwargs`\u3002\u9996\u5148\u65ad\u8a00 `new_kwargs` \u4e2d\u4e0d\u5e94\u5305\u542b `model` \u952e\uff0c\u786e\u4fdd\u6a21\u578b\u5728\u5ba2\u6237\u7aef\u8865\u4e01\u4e2d\u8bbe\u7f6e\u800c\u975e\u5728\u521b\u5efa\u65b9\u6cd5\u4e2d\u4f20\u5165\u3002\u968f\u540e\u5bfc\u5165\u672c\u5730 `update_gemini_kwargs`\uff0c\u5c06 `response_model` \u7684 Gemini schema \u6dfb\u52a0\u5230 `new_kwargs[\"tools\"]`\uff0c\u5e76\u914d\u7f6e `tool_config` \u4e3a\u51fd\u6570\u8c03\u7528\u6a21\u5f0f `ANY`\uff0c\u4ec5\u5141\u8bb8\u8c03\u7528\u8be5\u54cd\u5e94\u6a21\u578b\u5bf9\u5e94\u7684\u51fd\u6570\u540d\u3002\u6700\u540e\u8c03\u7528 `update_gemini_kwargs` \u5bf9\u53c2\u6570\u8fdb\u884c\u8fdb\u4e00\u6b65\u5904\u7406\uff0c\u5e76\u8fd4\u56de\u539f\u59cb\u54cd\u5e94\u6a21\u578b\u7c7b\u578b\u548c\u66f4\u65b0\u540e\u7684\u5173\u952e\u5b57\u53c2\u6570\u5b57\u5178\u3002\u8f93\u5165\u4e3a\u6a21\u578b\u7c7b\u578b\u548c\u53c2\u6570\u5b57\u5178\uff0c\u8f93\u51fa\u4e3a\u6a21\u578b\u7c7b\u578b\u548c\u4fee\u6539\u540e\u7684\u53c2\u6570\u5b57\u5178\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:44:21.768925"}