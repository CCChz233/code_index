{"summary": "- \u8f93\u5165: \u5305\u542b\u591a\u4e2a\u5b57\u5178\u7684\u5217\u8868 `messages`\uff0c\u6bcf\u4e2a\u5b57\u5178\u8868\u793a\u5bf9\u8bdd\u4e2d\u7684\u4e00\u6761\u6d88\u606f\uff0c\u5b57\u6bb5\u5305\u62ec `role`\uff08\u89d2\u8272\uff09\u548c `content`\uff08\u5185\u5bb9\uff09\uff0c\u5176\u4e2d `content` \u53ef\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u5305\u542b `type`\u3001`text`\u3001`cache_control` \u7b49\u952e\u7684\u5b57\u5178\u5217\u8868\u3002\n- \u4e1a\u52a1\u903b\u8f91: `extract_system_message` \u51fd\u6570\u904d\u5386\u904d\u5386\u904d\u5386... (... )... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... \n- ... ... ... ...\nThe user wants a summary of the functionality of the code. They gave a snippet of test file `tests/test_utils.py`. The code imports various utilities from `instructor.utils`. The test function `test_extract_system_messages_with_cache_control` defines a list `messages` with system, user messages, etc., then calls `extract_system_messages(messages)` and asserts the result equals expected list of dicts.\n\nWe need to summarize the functionality of the code: business logic, inputs, outputs. Should start directly with summary content, no \"This code does...\". Use Chinese (maybe with English). Provide summary of what the test is checking: extraction of system messages, handling of cache_control, flattening content.\n\nWe need to mention that the test verifies that `extract_system_messages` extracts system messages from a mixed list, normalizes string content to dict with type text, preserves cache_control, and concatenates long text.\n\nAlso mention that the test imports other utilities but only uses extract_system_messages.\n\nThus summary: Input: list of message dicts; Output: list of normalized system message dicts.\n\nLet's produce final answer.assistantfinal\u8f93\u5165\u662f\u4e00\u7ec4\u5bf9\u8bdd\u6d88\u606f\u5217\u8868 `messages`\uff0c\u6bcf\u6761\u6d88\u606f\u4e3a\u5b57\u5178\uff0c\u5305\u542b `role`\uff08\u5982 `\"system\"`\u3001`\"user\"`\uff09\u548c `content`\uff08\u53ef\u80fd\u662f\u7eaf\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u80fd\u662f\u5305\u542b `type`\u3001`text`\u3001`cache_control` \u7b49\u952e\u7684\u5b57\u5178\u5217\u8868\uff09\u3002  \n\u4e1a\u52a1\u903b\u8f91\uff1a`extract_system_messages` \u8fc7\u6ee4\u51fa `role` \u4e3a `\"system\"` \u7684\u6761\u76ee\uff1b\u5bf9\u7eaf\u5b57\u7b26\u4e32\u7684 `content` \u8f6c\u6362\u4e3a `{\"type\": \"text\", \"text\": <\u539f\u5b57\u7b26\u4e32>}` \u5f62\u5f0f\uff1b\u5bf9\u5df2\u7ecf\u662f\u5b57\u5178\u5217\u8868\u7684 `content` \u76f4\u63a5\u4fdd\u7559\u5e76\u5c55\u5f00\uff1b\u5728\u5c55\u5f00\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u539f\u6709\u7684 `cache_control` \u7b49\u5143\u6570\u636e", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:52:45.811936"}