{"summary": "- The script defines a command-line interface (CLI) using Typer.\n- It reads an environment variable `OPENAI_API_KEY` (\n\n\u83b7\u53d6\u8fc7\u53bb N \u5929\u7684 OpenAI \u4f7f\u7528\u6570\u636e\uff0c\u8ba1\u7b97\u6bcf\u4e2a\u6a21\u578b\u7684\u8d39\u7528\uff0c\u5e76\u4ee5\u8868\u683c\u5f62\u5f0f\u5728\u7ec8\u7aef\u5c55\u793a\u3002  \n\u8f93\u5165\uff1a`n_days`\uff08\u6574\u6570\uff09\uff0c\u8868\u793a\u67e5\u8be2\u7684\u5929\u6570\u3002  \n\u8f93\u51fa\uff1a\u5728\u7ec8\u7aef\u6253\u5370\u5305\u542b\u65e5\u671f\u3001\u6a21\u578b\u540d\u79f0\u3001\u4f7f\u7528\u91cf\uff08tokens\uff09\u548c\u8d39\u7528\uff08\u7f8e\u5143\uff09\u7684\u8868\u683c\u3002  \n\n\u6838\u5fc3\u6d41\u7a0b\uff1a\n1. `get_usage_for_past_n_days` \u5f02\u6b65\u5e76\u884c\u8c03\u7528 `fetch_usage(date)`\uff08\u672a\u5c55\u793a\uff09\u83b7\u53d6\u6bcf\u4e00\u5929\u7684\u4f7f\u7528\u8bb0\u5f55\uff0c\u8fd4\u56de\u6240\u6709\u8bb0\u5f55\u7684\u5217\u8868\u3002  \n2. `calculate_costs(data)`\uff08\u672a\u5c55\u793a\uff09\u904d\u5386\u8bb0\u5f55\uff0c\u6839\u636e `MODEL_COSTS` \u4e2d\u7684\u5355\u4ef7\uff08prompt/completion\uff09\u8ba1\u7b97\u6bcf\u6761\u8bb0\u5f55\u7684\u8d39\u7528\uff0c\u5e76\u7d2f\u8ba1\u540c\u4e00\u5929\u3001\u540c\u6a21\u578b\u7684\u8d39\u7528\u3002  \n3. `display_usage(costs)` \u4f7f\u7528 Rich \u5e93\u521b\u5efa `Table`\uff0c\u5217\u51fa\u65e5\u671f\u3001\u6a21\u578b\u3001tokens\u3001\u8d39\u7528\uff0c\u5e76\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u3002  \n\n\u8f85\u52a9\uff1a\n- `MODEL_COSTS` \u5b9a\u4e49\u4e86\u5404\u6a21\u578b\u7684 prompt \u4e0e completion \u8d39\u7528\uff08\u7f8e\u5143/\u5343 token\uff09\u3002  \n- `api_key` \u4ece\u73af\u5883\u53d8\u91cf\u8bfb\u53d6\uff0c\u7528\u4e8e\u540e\u7eed\u7684 OpenAI API \u8c03\u7528\uff08\u5728 `fetch_usage` \u4e2d\u5b9e\u73b0\uff09\u3002  \n- `Progress` \u7528\u4e8e\u663e\u793a\u591a\u5929\u6570\u636e\u6293\u53d6\u7684\u8fdb\u5ea6\u6761\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:55:23.645630"}