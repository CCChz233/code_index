{"summary": "- Provides a decorator `async_field_validator` for asynchronous validation of specific fields in a data model.\n- The decorator takes a primary field name and optional additional field names.\n- It validates that the decorated function has the correct signature: either a single value parameter (for single-field validation) or a second `info` parameter of type `ValidationInfo`.\n- If the signature is valid, it attaches metadata (field names, function, and whether validation context is needed) to the function using a custom attribute `__async_validator__`.\n- This metadata is later used by Pydantic\u00a0(or\u00a0the\u00a0the\u00a0the\u00a0...\u00a0). The code snippet appears to ****.\nWe need to produce summary directly, no intro. Should be Chinese, maybe mix English. Provide business logic, inputs, outputs. Let's craft.assistantfinal\u63d0\u4f9b\u4e00\u4e2a\u7528\u4e8e **\u5f02\u6b65\u5b57\u6bb5\u6821\u9a8c** \u7684\u88c5\u9970\u5668 `async_field_validator`\u3002  \n\n**\u8f93\u5165**  \n- `field: str` \u4e0e\u53ef\u53d8\u6570\u91cf\u7684 `*fields: str`\uff1a\u5f85\u6821\u9a8c\u7684\u5b57\u6bb5\u540d\u5217\u8868\u3002  \n- \u88ab\u88c5\u9970\u7684\u51fd\u6570 `func`\uff1a\u5fc5\u987b\u662f\u53ef\u8c03\u7528\u5bf9\u8c61\uff0c\u7b7e\u540d\u53ea\u80fd\u662f  \n  1. `func(value)` \u2013 \u53ea\u63a5\u53d7\u5f85\u6821\u9a8c\u7684\u5b57\u6bb5\u503c\uff1b\u6216  \n  2. `func(value, info)` \u2013 \u7b2c\u4e8c\u4e2a\u53c2\u6570\u5fc5\u987b\u547d\u540d\u4e3a `info`\uff0c\u7c7b\u578b\u6807\u6ce8\u4e3a `pydantic.ValidationInfo`\uff0c\u7528\u4e8e\u83b7\u53d6\u6821\u9a8c\u4e0a\u4e0b\u6587\u3002  \n\n**\u4e1a\u52a1\u903b\u8f91**  \n1. \u89e3\u6790 `func` \u7684\u7b7e\u540d\uff0c\u68c0\u67e5\u53c2\u6570\u6570\u91cf\u4e0e\u7c7b\u578b\uff0c\u82e5\u4e0d\u7b26\u5408\u4e0a\u8ff0\u89c4\u5219\u5219\u629b\u51fa `ValueError`\u3002  \n2. \u6839\u636e\u7b7e\u540d\u5224\u65ad\u662f\u5426\u9700\u8981\u6821\u9a8c\u4e0a\u4e0b\u6587 (`requires_validation_context`)\u3002  \n3. \u5c06\u6821\u9a8c\u5143\u6570\u636e `(field_names, func, requires_validation_context)` \u7ed1\u5b9a\u5230\u51fd\u6570\u5bf9\u8c61\u4e0a\uff0c\u952e\u540d\u4e3a `__async_validator__`\uff08\u5e38\u91cf `ASYNC_VALIDATOR_KEY`\uff09\u3002  \n\n**\u8f93\u51fa**  \n- \u8fd4\u56de\u539f\u51fd\u6570 `func`\uff08\u5df2\u9644\u52a0 `__async_validator__` \u5c5e\u6027\uff09\uff0c\u4f9b\u540e\u7eed\u7684 Pydantic\uff08\u6216\u81ea\u5b9a\u4e49\u6a21\u578b\uff09\u5728\u6a21\u578b\u5b9e\u4f8b\u5316\u6216\u66f4\u65b0\u65f6\u5f02\u6b65\u8c03\u7528\u3002  \n\n**\u4f5c\u7528**  \n\u901a\u8fc7\u88c5\u9970\u5668\u628a\u5f02\u6b65\u6821\u9a8c\u51fd\u6570\u4e0e\u76ee\u6807\u5b57\u6bb5\u5173\u8054\uff0c\u5e76\u5728\u51fd\u6570\u4e0a\u4fdd\u5b58\u5fc5\u8981\u7684\u5143\u4fe1\u606f\uff0c\u4f9b\u6846\u67b6\u5728\u8fd0\u884c\u65f6\u81ea\u52a8\u6267\u884c\u5f02\u6b65\u6821\u9a8c\u903b\u8f91\u3002", "prompt_id": "28ad819ea97a795ed2ae85e64d974c5c", "created_at": "2026-02-04T20:46:49.862589"}